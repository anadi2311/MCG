{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/buzzlite/MCG-VUiLA/src/Onboarding/OnboardingCompany.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport { Form, Input, Select } from 'semantic-ui-react';\nconst options = [{\n  key: 'm',\n  text: \"Manufacturer\",\n  value: \"Manufacturer\"\n}, {\n  key: 'd',\n  text: \"Distributor\",\n  value: \"Distributor\"\n}, {\n  key: 't',\n  text: \"3PL Trucking\",\n  value: \"3PL trucking\"\n}];\n\nclass OnboardingCompany extends Component {\n  constructor(props) {\n    super(props);\n\n    this.changeHandler = event => {\n      let nam = event.target.name;\n      let val = event.target.value;\n      let err = \"\";\n\n      if (nam === \"company\" || \"location\") {\n        if (val != \"\" && Number(val)) {\n          err = /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Fields cannot be empty and must be string\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 23\n          }, this);\n        }\n      }\n\n      this.setState({\n        error: err\n      });\n      this.setState({\n        [nam]: val\n      });\n    };\n\n    this.changeSelect = (e, {\n      value\n    }) => this.setState({\n      scRole: value\n    });\n\n    this.submitHandler = event => {\n      event.preventDefault();\n      alert(\" You company Id is\" + this.state.companyId);\n      this.registerMyCompany(this.state.companyName, this.state.identificationNumber, this.state.location, this.state.scRole);\n    };\n\n    this.submitHandler = this.submitHandler.bind(this);\n    this.state = {\n      companyName: null,\n      identificationNumber: null,\n      location: null,\n      scRole: null,\n      error: '',\n      companyId: null\n    };\n    this.changeHandler = this.changeHandler.bind(this);\n    this.changeSelect = this.changeSelect.bind(this);\n  }\n\n  companyDidMount() {\n    this.watchEvents();\n  }\n\n  watchEvents() {\n    this.props.mcg.events.companyRegistered({\n      filter: {\n        _user: this.props.userAccount\n      }\n    }, {\n      fromBlock: 0,\n      toBlock: \"latest\"\n    }, function (error, event) {\n      console.log(event);\n    }).on('data', function (event) {\n      this.setState({\n        companyId: event.companyId\n      });\n      console.log(event.companyId);\n    });\n  }\n\n  async registerMyCompany(companyName, identificationNumber, location, scRole) {\n    const gasAmount = await this.props.mcg.methods.registerCompany(companyName, identificationNumber, location, scRole).estimateGas({\n      from: this.props.userAccount\n    });\n    await this.props.mcg.methods.registerCompany(companyName, identificationNumber, location, scRole).send({\n      from: this.props.userAccount,\n      gas: gasAmount\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: this.submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        widths: \"equal\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Field, {\n          control: Input,\n          fluid: true,\n          label: \"Company Name\",\n          placeholder: \" XYZ Ltd.\",\n          name: \"company\",\n          onChange: this.changeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n          control: Input,\n          fluid: true,\n          label: \"Identification Number\",\n          placeholder: \"123456789SK0001 \",\n          name: \"identification\",\n          onChange: this.changeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n          control: Input,\n          fluid: true,\n          label: \"Location\",\n          placeholder: \"1000 10 W Ave Vancouver\",\n          name: \"location\",\n          onChange: this.changeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n          control: Select,\n          name: \"SC Role\",\n          onChange: this.changeSelect,\n          fluid: true,\n          label: \"Select Supply Chain Role\",\n          options: options,\n          placeholder: \"Manufacturer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Form.Button, {\n        type: \"submit\",\n        children: \"Register Company\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), this.state.error, /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Company Name is \", this.state.companyName, \" and ID is \", this.state.identificationNumber, \" with location \", this.state.location, \" and role\", this.state.scRole, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default OnboardingCompany;","map":{"version":3,"sources":["/home/buzzlite/MCG-VUiLA/src/Onboarding/OnboardingCompany.js"],"names":["React","Component","Web3","Form","Input","Select","options","key","text","value","OnboardingCompany","constructor","props","changeHandler","event","nam","target","name","val","err","Number","setState","error","changeSelect","e","scRole","submitHandler","preventDefault","alert","state","companyId","registerMyCompany","companyName","identificationNumber","location","bind","companyDidMount","watchEvents","mcg","events","companyRegistered","filter","_user","userAccount","fromBlock","toBlock","console","log","on","gasAmount","methods","registerCompany","estimateGas","from","send","gas","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport { Form, Input, Select } from 'semantic-ui-react';\n\nconst options = [\n    {key: 'm', text: \"Manufacturer\", value: \"Manufacturer\"},\n    {key: 'd', text: \"Distributor\", value: \"Distributor\"},\n    {key: 't', text: \"3PL Trucking\", value: \"3PL trucking\"}\n]\n\nclass OnboardingCompany extends Component{\n\n    constructor(props){\n        super(props);\n        this.submitHandler = this.submitHandler.bind(this);\n        this.state = { companyName: null, identificationNumber: null, location: null,scRole: null,error: '', companyId: null};\n        this.changeHandler = this.changeHandler.bind(this);\n        this.changeSelect = this.changeSelect.bind(this);\n    }\n\n    companyDidMount(){\n        this.watchEvents()\n    }\n\n    watchEvents(){\n        this.props.mcg.events.companyRegistered({\n            filter:{_user: this.props.userAccount}\n        },{fromBlock:0, toBlock: \"latest\"\n        },function(error, event){console.log(event)}).on('data',function(event){\n            this.setState({companyId: event.companyId})\n            console.log(event.companyId);\n        })\n    }\n\n    async registerMyCompany(companyName, identificationNumber,location, scRole){\n        \n        const gasAmount = await this.props.mcg.methods.registerCompany(companyName,identificationNumber,location,scRole).estimateGas({from: this.props.userAccount});\n        await this.props.mcg.methods.registerCompany(companyName,identificationNumber,location,scRole).send({from: this.props.userAccount, gas: gasAmount})\n    }\n\n    changeHandler = (event) => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        let err = \"\";\n        if (nam === \"company\"||\"location\"){\n            if(val!=\"\" && Number(val)){\n                err = <strong>Fields cannot be empty and must be string</strong>\n            }\n        }\n        this.setState({error:err});\n        this.setState({[nam]:val})\n    }\n\n    changeSelect = (e,{value}) => this.setState({scRole:value});\n\n    submitHandler = (event) => {\n        event.preventDefault();\n        alert (\" You company Id is\" + this.state.companyId);\n        this.registerMyCompany(this.state.companyName, this.state.identificationNumber, this.state.location, this.state.scRole);\n    }\n\n    render(){\n        return(\n                <Form onSubmit = {this.submitHandler}>\n                    <Form.Group widths = \"equal\">\n                        <Form.Field control = {Input}  fluid label='Company Name' placeholder=' XYZ Ltd.' name = \"company\" onChange = {this.changeHandler}/>\n                        <Form.Field control = {Input} fluid label='Identification Number' placeholder=\"123456789SK0001 \" name = \"identification\" onChange  = {this.changeHandler} />\n                        <Form.Field control = {Input} fluid label='Location' placeholder=\"1000 10 W Ave Vancouver\" name = \"location\" onChange  = {this.changeHandler} />\n                        <Form.Field control = {Select}\n                            name = \"SC Role\"\n                            onChange = {this.changeSelect}   \n                            fluid\n                            label='Select Supply Chain Role'\n                            options = {options} \n                            placeholder='Manufacturer'\n                        />\n                    </Form.Group>\n                    <Form.Button type = \"submit\" >Register Company</Form.Button>\n                    {this.state.error}\n                    <p>Company Name is {this.state.companyName} and ID is {this.state.identificationNumber} with location {this.state.location} and role{this.state.scRole} </p>\n                \n                </Form>\n        )\n    }\n}\n\nexport default OnboardingCompany;"]},"metadata":{},"sourceType":"module"}