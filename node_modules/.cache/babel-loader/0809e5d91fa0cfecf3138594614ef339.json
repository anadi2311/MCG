{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web3-utils'), require('web3-core-helpers'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('web3-core-method'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/assertThisInitialized'), require('lodash/isFunction'), require('lodash/isObject'), require('eth-lib/lib/hash'), require('eth-lib/lib/rlp'), require('eth-lib/lib/bytes'), require('eth-lib/lib/account'), require('web3-core'), require('scryptsy'), require('lodash/isString'), require('uuid'), require('randombytes'), require('pbkdf2'), require('browserify-cipher')) : typeof define === 'function' && define.amd ? define(['exports', 'web3-utils', 'web3-core-helpers', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'web3-core-method', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/assertThisInitialized', 'lodash/isFunction', 'lodash/isObject', 'eth-lib/lib/hash', 'eth-lib/lib/rlp', 'eth-lib/lib/bytes', 'eth-lib/lib/account', 'web3-core', 'scryptsy', 'lodash/isString', 'uuid', 'randombytes', 'pbkdf2', 'browserify-cipher'], factory) : (global = global || self, factory(global.Web3EthAccounts = {}, global.Utils, global.web3CoreHelpers, global._classCallCheck, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.web3CoreMethod, global._regeneratorRuntime, global._asyncToGenerator, global._createClass, global._assertThisInitialized, global.isFunction, global.isObject, global.Hash, global.RLP, global.Bytes, global.EthLibAccount, global.web3Core, global.scryptsy, global.isString, global.uuid, global.randomBytes, global.pbkdf2, global.browserifyCipher));\n})(this, function (exports, Utils, web3CoreHelpers, _classCallCheck, _possibleConstructorReturn, _getPrototypeOf, _inherits, web3CoreMethod, _regeneratorRuntime, _asyncToGenerator, _createClass, _assertThisInitialized, isFunction, isObject, Hash, RLP, Bytes, EthLibAccount, web3Core, scryptsy, isString, uuid, randomBytes, pbkdf2, browserifyCipher) {\n  'use strict';\n\n  _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n  _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n  _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n  _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n  _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n  _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n  _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n  _assertThisInitialized = _assertThisInitialized && _assertThisInitialized.hasOwnProperty('default') ? _assertThisInitialized['default'] : _assertThisInitialized;\n  isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n  isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n  Hash = Hash && Hash.hasOwnProperty('default') ? Hash['default'] : Hash;\n  RLP = RLP && RLP.hasOwnProperty('default') ? RLP['default'] : RLP;\n  Bytes = Bytes && Bytes.hasOwnProperty('default') ? Bytes['default'] : Bytes;\n  scryptsy = scryptsy && scryptsy.hasOwnProperty('default') ? scryptsy['default'] : scryptsy;\n  isString = isString && isString.hasOwnProperty('default') ? isString['default'] : isString;\n  uuid = uuid && uuid.hasOwnProperty('default') ? uuid['default'] : uuid;\n  randomBytes = randomBytes && randomBytes.hasOwnProperty('default') ? randomBytes['default'] : randomBytes;\n\n  var MethodFactory = function (_AbstractMethodFactor) {\n    _inherits(MethodFactory, _AbstractMethodFactor);\n\n    function MethodFactory(utils, formatters) {\n      var _this;\n\n      _classCallCheck(this, MethodFactory);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MethodFactory).call(this, utils, formatters));\n      _this.methods = {\n        getChainId: web3CoreMethod.ChainIdMethod,\n        getGasPrice: web3CoreMethod.GetGasPriceMethod,\n        getTransactionCount: web3CoreMethod.GetTransactionCountMethod\n      };\n      return _this;\n    }\n\n    return MethodFactory;\n  }(web3CoreMethod.AbstractMethodFactory);\n\n  var scrypt;\n  var isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n\n  if (isNode) {\n    var NODE_MIN_VER_WITH_BUILTIN_SCRYPT = '10.5.0';\n\n    var semver = require('semver');\n\n    var useNodeBuiltin = isNode && semver.Range('>=' + NODE_MIN_VER_WITH_BUILTIN_SCRYPT).test(process.version);\n\n    if (useNodeBuiltin) {\n      var crypto = require('crypto');\n\n      scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n        return crypto.scryptSync(key, salt, dkLength, {\n          N: N,\n          r: r,\n          p: p\n        });\n      };\n    } else {\n      var scryptPackage;\n\n      try {\n        scryptPackage = require('scrypt');\n\n        scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n          return scryptPackage.hashSync(key, {\n            N: N,\n            r: r,\n            p: p\n          }, dkLength, salt);\n        };\n      } catch (error) {\n        console.warn(\"\\x1B[33m%s\\x1B[0m\", \"You can improve web3's peformance when running Node.js versions older than \".concat(NODE_MIN_VER_WITH_BUILTIN_SCRYPT, \" by installing the (deprecated) scrypt package in your project\"));\n      }\n    }\n  }\n\n  scrypt = scrypt || scryptsy;\n  var scrypt$1 = scrypt;\n\n  var Account = function () {\n    function Account(options) {\n      var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _classCallCheck(this, Account);\n\n      this.address = options.address;\n      this.privateKey = options.privateKey;\n      this.nonce = options.nonce;\n      this.accounts = accounts;\n    }\n\n    _createClass(Account, [{\n      key: \"signTransaction\",\n      value: function signTransaction(tx, callback) {\n        return this.accounts.signTransaction(tx, this.privateKey, callback);\n      }\n    }, {\n      key: \"sign\",\n      value: function sign(data) {\n        if (Utils.isHexStrict(data)) {\n          data = Utils.hexToBytes(data);\n        }\n\n        var messageBuffer = Buffer.from(data);\n        var preamble = \"\\x19Ethereum Signed Message:\\n\".concat(data.length);\n        var preambleBuffer = Buffer.from(preamble);\n        var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n        var hash = Hash.keccak256s(ethMessage);\n        var signature = EthLibAccount.sign(hash, this.privateKey);\n        var vrs = EthLibAccount.decodeSignature(signature);\n        return {\n          message: data,\n          messageHash: hash,\n          v: vrs[0],\n          r: vrs[1],\n          s: vrs[2],\n          signature: signature\n        };\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(password, options) {\n        return Account.fromPrivateKey(this.privateKey, this.accounts).toV3Keystore(password, options);\n      }\n    }, {\n      key: \"toV3Keystore\",\n      value: function toV3Keystore(password, options) {\n        options = options || {};\n        var salt = options.salt || randomBytes(32);\n        var iv = options.iv || randomBytes(16);\n        var derivedKey;\n        var kdf = options.kdf || 'scrypt';\n        var kdfparams = {\n          dklen: options.dklen || 32,\n          salt: salt.toString('hex')\n        };\n\n        if (kdf === 'pbkdf2') {\n          kdfparams.c = options.c || 262144;\n          kdfparams.prf = 'hmac-sha256';\n          derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), salt, kdfparams.c, kdfparams.dklen, 'sha256');\n        } else if (kdf === 'scrypt') {\n          kdfparams.n = options.n || 8192;\n          kdfparams.r = options.r || 8;\n          kdfparams.p = options.p || 1;\n          derivedKey = scrypt$1(Buffer.from(password), salt, kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n        } else {\n          throw new Error('Unsupported kdf');\n        }\n\n        var cipher = browserifyCipher.createCipheriv(options.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n\n        if (!cipher) {\n          throw new Error('Unsupported cipher');\n        }\n\n        var ciphertext = Buffer.concat([cipher.update(Buffer.from(this.privateKey.replace('0x', ''), 'hex')), cipher.final()]);\n        var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')])).replace('0x', '');\n        return {\n          version: 3,\n          id: uuid.v4({\n            random: options.uuid || randomBytes(16)\n          }),\n          address: this.address.toLowerCase().replace('0x', ''),\n          crypto: {\n            ciphertext: ciphertext.toString('hex'),\n            cipherparams: {\n              iv: iv.toString('hex')\n            },\n            cipher: options.cipher || 'aes-128-ctr',\n            kdf: kdf,\n            kdfparams: kdfparams,\n            mac: mac.toString('hex')\n          }\n        };\n      }\n    }], [{\n      key: \"from\",\n      value: function from(entropy) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Account(EthLibAccount.create(entropy || Utils.randomHex(32)), accounts);\n      }\n    }, {\n      key: \"fromPrivateKey\",\n      value: function fromPrivateKey(privateKey) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Account(EthLibAccount.fromPrivate(privateKey), accounts);\n      }\n    }, {\n      key: \"fromV3Keystore\",\n      value: function fromV3Keystore(v3Keystore, password) {\n        var nonStrict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var accounts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n        if (!isString(password)) {\n          throw new Error('No password given.');\n        }\n\n        var json = isObject(v3Keystore) ? v3Keystore : JSON.parse(nonStrict ? v3Keystore.toLowerCase() : v3Keystore);\n\n        if (json.version !== 3) {\n          throw new Error('Not a valid V3 wallet');\n        }\n\n        var derivedKey;\n        var kdfparams;\n\n        if (json.crypto.kdf === 'scrypt') {\n          kdfparams = json.crypto.kdfparams;\n          derivedKey = scrypt$1(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n        } else if (json.crypto.kdf === 'pbkdf2') {\n          kdfparams = json.crypto.kdfparams;\n\n          if (kdfparams.prf !== 'hmac-sha256') {\n            throw new Error('Unsupported parameters to PBKDF2');\n          }\n\n          derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n        } else {\n          throw new Error('Unsupported key derivation scheme');\n        }\n\n        var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n        var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])).replace('0x', '');\n\n        if (mac !== json.crypto.mac) {\n          throw new Error('Key derivation failed - possibly wrong password');\n        }\n\n        var decipher = browserifyCipher.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n        var seed = \"0x\".concat(Buffer.concat([decipher.update(ciphertext), decipher.final()]).toString('hex'));\n        return Account.fromPrivateKey(seed, accounts);\n      }\n    }]);\n\n    return Account;\n  }();\n\n  var Wallet = function () {\n    function Wallet(utils, accountsModule) {\n      _classCallCheck(this, Wallet);\n\n      this.utils = utils;\n      this.accountsModule = accountsModule;\n      this.defaultKeyName = 'web3js_wallet';\n      this.accounts = {};\n      this.accountsIndex = 0;\n      return new Proxy(this, {\n        get: function get(target, name) {\n          if (target.accounts[name]) {\n            return target.accounts[name];\n          }\n\n          if (name === 'length') {\n            return target.accountsIndex;\n          }\n\n          return target[name];\n        }\n      });\n    }\n\n    _createClass(Wallet, [{\n      key: \"create\",\n      value: function create(numberOfAccounts, entropy) {\n        for (var i = 0; i < numberOfAccounts; ++i) {\n          this.add(Account.from(entropy || this.utils.randomHex(32), this.accountsModule));\n        }\n\n        return this;\n      }\n    }, {\n      key: \"get\",\n      value: function get(account) {\n        return this.accounts[account];\n      }\n    }, {\n      key: \"add\",\n      value: function add(account) {\n        if (isString(account)) {\n          account = Account.fromPrivateKey(account, this.accountsModule);\n        }\n\n        if (!this.accounts[account.address]) {\n          this.accounts[this.accountsIndex] = account;\n          this.accounts[account.address] = account;\n          this.accounts[account.address.toLowerCase()] = account;\n          this.accountsIndex++;\n          return account;\n        }\n\n        return this.accounts[account.address];\n      }\n    }, {\n      key: \"remove\",\n      value: function remove(addressOrIndex) {\n        var account = this.accounts[addressOrIndex];\n\n        if (account) {\n          delete this.accounts[account.address];\n          delete this.accounts[account.address.toLowerCase()];\n          delete this.accounts[account.index];\n          return true;\n        }\n\n        return false;\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        for (var i = 0; i <= this.accountsIndex; i++) {\n          this.remove(i);\n        }\n\n        this.accountsIndex = 0;\n        return this;\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(password, options) {\n        var encryptedAccounts = [];\n\n        for (var i = 0; i < this.accountsIndex; i++) {\n          encryptedAccounts.push(this.accounts[i].encrypt(password, options));\n        }\n\n        return encryptedAccounts;\n      }\n    }, {\n      key: \"decrypt\",\n      value: function decrypt(encryptedWallet, password) {\n        var _this = this;\n\n        encryptedWallet.forEach(function (keystore) {\n          var account = Account.fromV3Keystore(keystore, password, false, _this.accountsModule);\n\n          if (!account) {\n            throw new Error(\"Couldn't decrypt accounts. Password wrong?\");\n          }\n\n          _this.add(account);\n        });\n        return this;\n      }\n    }, {\n      key: \"save\",\n      value: function save(password, keyName) {\n        console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n\n        if (typeof localStorage === 'undefined') {\n          throw new TypeError('window.localStorage is undefined.');\n        }\n\n        try {\n          localStorage.setItem(keyName || this.defaultKeyName, JSON.stringify(this.encrypt(password)));\n        } catch (error) {\n          if (error.code === 18) {\n            return true;\n          }\n\n          throw new Error(error);\n        }\n\n        return true;\n      }\n    }, {\n      key: \"load\",\n      value: function load(password, keyName) {\n        console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n\n        if (typeof localStorage === 'undefined') {\n          throw new TypeError('window.localStorage is undefined.');\n        }\n\n        var keystore;\n\n        try {\n          keystore = localStorage.getItem(keyName || this.defaultKeyName);\n\n          if (keystore) {\n            keystore = JSON.parse(keystore);\n          }\n        } catch (error) {\n          if (error.code === 18) {\n            keystore = this.defaultKeyName;\n          } else {\n            throw new Error(error);\n          }\n        }\n\n        return this.decrypt(keystore || [], password);\n      }\n    }]);\n\n    return Wallet;\n  }();\n\n  var Accounts = function (_AbstractWeb3Module) {\n    _inherits(Accounts, _AbstractWeb3Module);\n\n    function Accounts(provider, utils, formatters, methodFactory, options, net) {\n      var _this;\n\n      _classCallCheck(this, Accounts);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Accounts).call(this, provider, options, methodFactory, net));\n      _this.utils = utils;\n      _this.formatters = formatters;\n      _this._transactionSigner = options.transactionSigner;\n      _this.defaultKeyName = 'web3js_wallet';\n      _this.accounts = {};\n      _this.accountsIndex = 0;\n      _this.wallet = new Wallet(utils, _assertThisInitialized(_this));\n      return _this;\n    }\n\n    _createClass(Accounts, [{\n      key: \"create\",\n      value: function create(entropy) {\n        return Account.from(entropy, this);\n      }\n    }, {\n      key: \"privateKeyToAccount\",\n      value: function privateKeyToAccount(privateKey) {\n        return Account.fromPrivateKey(privateKey, this);\n      }\n    }, {\n      key: \"hashMessage\",\n      value: function hashMessage(data) {\n        if (this.utils.isHexStrict(data)) {\n          data = this.utils.hexToBytes(data);\n        }\n\n        var messageBuffer = Buffer.from(data);\n        var preambleBuffer = Buffer.from(\"\\x19Ethereum Signed Message:\\n\".concat(data.length));\n        var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n        return Hash.keccak256s(ethMessage);\n      }\n    }, {\n      key: \"signTransaction\",\n      value: function () {\n        var _signTransaction = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tx, privateKey, callback) {\n          var account, signedTransaction;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  account = Account.fromPrivateKey(privateKey, this);\n\n                  if (tx.chainId) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  _context.next = 5;\n                  return this.getChainId();\n\n                case 5:\n                  tx.chainId = _context.sent;\n\n                case 6:\n                  if (tx.gasPrice) {\n                    _context.next = 10;\n                    break;\n                  }\n\n                  _context.next = 9;\n                  return this.getGasPrice();\n\n                case 9:\n                  tx.gasPrice = _context.sent;\n\n                case 10:\n                  if (!(!tx.nonce && tx.nonce !== 0)) {\n                    _context.next = 14;\n                    break;\n                  }\n\n                  _context.next = 13;\n                  return this.getTransactionCount(account.address);\n\n                case 13:\n                  tx.nonce = _context.sent;\n\n                case 14:\n                  _context.next = 16;\n                  return this.transactionSigner.sign(this.formatters.inputCallFormatter(tx, this), account.privateKey);\n\n                case 16:\n                  signedTransaction = _context.sent;\n\n                  if (isFunction(callback)) {\n                    callback(false, signedTransaction);\n                  }\n\n                  return _context.abrupt(\"return\", signedTransaction);\n\n                case 21:\n                  _context.prev = 21;\n                  _context.t0 = _context[\"catch\"](0);\n\n                  if (!isFunction(callback)) {\n                    _context.next = 26;\n                    break;\n                  }\n\n                  callback(_context.t0, null);\n                  return _context.abrupt(\"return\");\n\n                case 26:\n                  throw _context.t0;\n\n                case 27:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[0, 21]]);\n        }));\n\n        function signTransaction(_x, _x2, _x3) {\n          return _signTransaction.apply(this, arguments);\n        }\n\n        return signTransaction;\n      }()\n    }, {\n      key: \"recoverTransaction\",\n      value: function recoverTransaction(rawTx) {\n        var values = RLP.decode(rawTx);\n        var signature = EthLibAccount.encodeSignature(values.slice(6, 9));\n        var recovery = Bytes.toNumber(values[6]);\n        var extraData = recovery < 35 ? [] : [Bytes.fromNumber(recovery - 35 >> 1), '0x', '0x'];\n        var signingData = values.slice(0, 6).concat(extraData);\n        var signingDataHex = RLP.encode(signingData);\n        return EthLibAccount.recover(Hash.keccak256(signingDataHex), signature);\n      }\n    }, {\n      key: \"sign\",\n      value: function sign(data, privateKey) {\n        if (this.utils.isHexStrict(data)) {\n          data = this.utils.hexToBytes(data);\n        }\n\n        return Account.fromPrivateKey(privateKey, this).sign(data);\n      }\n    }, {\n      key: \"recover\",\n      value: function recover(message, signature, preFixed) {\n        if (isObject(message)) {\n          return this.recover(message.messageHash, EthLibAccount.encodeSignature([message.v, message.r, message.s]), true);\n        }\n\n        if (!preFixed) {\n          message = this.hashMessage(message);\n        }\n\n        if (arguments.length >= 4) {\n          return this.recover(arguments[0], EthLibAccount.encodeSignature([arguments[1], arguments[2], arguments[3]]), !!arguments[4]);\n        }\n\n        return EthLibAccount.recover(message, signature);\n      }\n    }, {\n      key: \"decrypt\",\n      value: function decrypt(v3Keystore, password, nonStrict) {\n        return Account.fromV3Keystore(v3Keystore, password, nonStrict, this);\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(privateKey, password, options) {\n        return Account.fromPrivateKey(privateKey, this).toV3Keystore(password, options);\n      }\n    }, {\n      key: \"transactionSigner\",\n      get: function get() {\n        return this._transactionSigner;\n      },\n      set: function set(transactionSigner) {\n        if (transactionSigner.type && transactionSigner.type === 'TransactionSigner') {\n          throw new Error('Invalid TransactionSigner given!');\n        }\n\n        this._transactionSigner = transactionSigner;\n      }\n    }]);\n\n    return Accounts;\n  }(web3Core.AbstractWeb3Module);\n\n  function Accounts$1(provider) {\n    var net = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return new Accounts(provider, Utils, web3CoreHelpers.formatters, new MethodFactory(Utils, web3CoreHelpers.formatters), options, net);\n  }\n\n  exports.Accounts = Accounts$1;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/home/buzzlite/MCG-VUiLA/node_modules/web3-eth-accounts/dist/web3-eth-accounts.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","Web3EthAccounts","Utils","web3CoreHelpers","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","_inherits","web3CoreMethod","_regeneratorRuntime","_asyncToGenerator","_createClass","_assertThisInitialized","isFunction","isObject","Hash","RLP","Bytes","EthLibAccount","web3Core","scryptsy","isString","uuid","randomBytes","pbkdf2","browserifyCipher","hasOwnProperty","MethodFactory","_AbstractMethodFactor","utils","formatters","_this","call","methods","getChainId","ChainIdMethod","getGasPrice","GetGasPriceMethod","getTransactionCount","GetTransactionCountMethod","AbstractMethodFactory","scrypt","isNode","Object","prototype","toString","process","NODE_MIN_VER_WITH_BUILTIN_SCRYPT","semver","useNodeBuiltin","Range","test","version","crypto","key","salt","N","r","p","dkLength","scryptSync","scryptPackage","hashSync","error","console","warn","concat","scrypt$1","Account","options","accounts","arguments","length","undefined","address","privateKey","nonce","value","signTransaction","tx","callback","sign","data","isHexStrict","hexToBytes","messageBuffer","Buffer","from","preamble","preambleBuffer","ethMessage","hash","keccak256s","signature","vrs","decodeSignature","message","messageHash","v","s","encrypt","password","fromPrivateKey","toV3Keystore","iv","derivedKey","kdf","kdfparams","dklen","c","prf","pbkdf2Sync","n","Error","cipher","createCipheriv","slice","ciphertext","update","replace","final","mac","keccak256","id","v4","random","toLowerCase","cipherparams","entropy","create","randomHex","fromPrivate","fromV3Keystore","v3Keystore","nonStrict","json","JSON","parse","decipher","createDecipheriv","seed","Wallet","accountsModule","defaultKeyName","accountsIndex","Proxy","get","target","name","numberOfAccounts","i","add","account","remove","addressOrIndex","index","clear","encryptedAccounts","push","decrypt","encryptedWallet","forEach","keystore","save","keyName","localStorage","TypeError","setItem","stringify","code","load","getItem","Accounts","_AbstractWeb3Module","provider","methodFactory","net","_transactionSigner","transactionSigner","wallet","privateKeyToAccount","hashMessage","_signTransaction","mark","_callee","signedTransaction","wrap","_callee$","_context","prev","next","chainId","sent","gasPrice","inputCallFormatter","abrupt","t0","stop","_x","_x2","_x3","apply","recoverTransaction","rawTx","values","decode","encodeSignature","recovery","toNumber","extraData","fromNumber","signingData","signingDataHex","encode","recover","preFixed","set","type","AbstractWeb3Module","Accounts$1","defineProperty"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web3-utils'), require('web3-core-helpers'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('web3-core-method'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/assertThisInitialized'), require('lodash/isFunction'), require('lodash/isObject'), require('eth-lib/lib/hash'), require('eth-lib/lib/rlp'), require('eth-lib/lib/bytes'), require('eth-lib/lib/account'), require('web3-core'), require('scryptsy'), require('lodash/isString'), require('uuid'), require('randombytes'), require('pbkdf2'), require('browserify-cipher')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'web3-utils', 'web3-core-helpers', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'web3-core-method', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/assertThisInitialized', 'lodash/isFunction', 'lodash/isObject', 'eth-lib/lib/hash', 'eth-lib/lib/rlp', 'eth-lib/lib/bytes', 'eth-lib/lib/account', 'web3-core', 'scryptsy', 'lodash/isString', 'uuid', 'randombytes', 'pbkdf2', 'browserify-cipher'], factory) :\n    (global = global || self, factory(global.Web3EthAccounts = {}, global.Utils, global.web3CoreHelpers, global._classCallCheck, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.web3CoreMethod, global._regeneratorRuntime, global._asyncToGenerator, global._createClass, global._assertThisInitialized, global.isFunction, global.isObject, global.Hash, global.RLP, global.Bytes, global.EthLibAccount, global.web3Core, global.scryptsy, global.isString, global.uuid, global.randomBytes, global.pbkdf2, global.browserifyCipher));\n}(this, function (exports, Utils, web3CoreHelpers, _classCallCheck, _possibleConstructorReturn, _getPrototypeOf, _inherits, web3CoreMethod, _regeneratorRuntime, _asyncToGenerator, _createClass, _assertThisInitialized, isFunction, isObject, Hash, RLP, Bytes, EthLibAccount, web3Core, scryptsy, isString, uuid, randomBytes, pbkdf2, browserifyCipher) { 'use strict';\n\n    _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n    _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n    _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n    _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n    _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n    _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n    _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n    _assertThisInitialized = _assertThisInitialized && _assertThisInitialized.hasOwnProperty('default') ? _assertThisInitialized['default'] : _assertThisInitialized;\n    isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n    isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n    Hash = Hash && Hash.hasOwnProperty('default') ? Hash['default'] : Hash;\n    RLP = RLP && RLP.hasOwnProperty('default') ? RLP['default'] : RLP;\n    Bytes = Bytes && Bytes.hasOwnProperty('default') ? Bytes['default'] : Bytes;\n    scryptsy = scryptsy && scryptsy.hasOwnProperty('default') ? scryptsy['default'] : scryptsy;\n    isString = isString && isString.hasOwnProperty('default') ? isString['default'] : isString;\n    uuid = uuid && uuid.hasOwnProperty('default') ? uuid['default'] : uuid;\n    randomBytes = randomBytes && randomBytes.hasOwnProperty('default') ? randomBytes['default'] : randomBytes;\n\n    var MethodFactory =\n    function (_AbstractMethodFactor) {\n      _inherits(MethodFactory, _AbstractMethodFactor);\n      function MethodFactory(utils, formatters) {\n        var _this;\n        _classCallCheck(this, MethodFactory);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MethodFactory).call(this, utils, formatters));\n        _this.methods = {\n          getChainId: web3CoreMethod.ChainIdMethod,\n          getGasPrice: web3CoreMethod.GetGasPriceMethod,\n          getTransactionCount: web3CoreMethod.GetTransactionCountMethod\n        };\n        return _this;\n      }\n      return MethodFactory;\n    }(web3CoreMethod.AbstractMethodFactory);\n\n    var scrypt;\n    var isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n    if (isNode) {\n      var NODE_MIN_VER_WITH_BUILTIN_SCRYPT = '10.5.0';\n      var semver = require('semver');\n      var useNodeBuiltin = isNode && semver.Range('>=' + NODE_MIN_VER_WITH_BUILTIN_SCRYPT).test(process.version);\n      if (useNodeBuiltin) {\n        var crypto = require('crypto');\n        scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n          return crypto.scryptSync(key, salt, dkLength, {\n            N: N,\n            r: r,\n            p: p\n          });\n        };\n      } else {\n        var scryptPackage;\n        try {\n          scryptPackage = require('scrypt');\n          scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n            return scryptPackage.hashSync(key, {\n              N: N,\n              r: r,\n              p: p\n            }, dkLength, salt);\n          };\n        } catch (error) {\n          console.warn(\"\\x1B[33m%s\\x1B[0m\", \"You can improve web3's peformance when running Node.js versions older than \".concat(NODE_MIN_VER_WITH_BUILTIN_SCRYPT, \" by installing the (deprecated) scrypt package in your project\"));\n        }\n      }\n    }\n    scrypt = scrypt || scryptsy;\n    var scrypt$1 = scrypt;\n\n    var Account =\n    function () {\n      function Account(options) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        _classCallCheck(this, Account);\n        this.address = options.address;\n        this.privateKey = options.privateKey;\n        this.nonce = options.nonce;\n        this.accounts = accounts;\n      }\n      _createClass(Account, [{\n        key: \"signTransaction\",\n        value: function signTransaction(tx, callback) {\n          return this.accounts.signTransaction(tx, this.privateKey, callback);\n        }\n      }, {\n        key: \"sign\",\n        value: function sign(data) {\n          if (Utils.isHexStrict(data)) {\n            data = Utils.hexToBytes(data);\n          }\n          var messageBuffer = Buffer.from(data);\n          var preamble = \"\\x19Ethereum Signed Message:\\n\".concat(data.length);\n          var preambleBuffer = Buffer.from(preamble);\n          var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n          var hash = Hash.keccak256s(ethMessage);\n          var signature = EthLibAccount.sign(hash, this.privateKey);\n          var vrs = EthLibAccount.decodeSignature(signature);\n          return {\n            message: data,\n            messageHash: hash,\n            v: vrs[0],\n            r: vrs[1],\n            s: vrs[2],\n            signature: signature\n          };\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(password, options) {\n          return Account.fromPrivateKey(this.privateKey, this.accounts).toV3Keystore(password, options);\n        }\n      }, {\n        key: \"toV3Keystore\",\n        value: function toV3Keystore(password, options) {\n          options = options || {};\n          var salt = options.salt || randomBytes(32);\n          var iv = options.iv || randomBytes(16);\n          var derivedKey;\n          var kdf = options.kdf || 'scrypt';\n          var kdfparams = {\n            dklen: options.dklen || 32,\n            salt: salt.toString('hex')\n          };\n          if (kdf === 'pbkdf2') {\n            kdfparams.c = options.c || 262144;\n            kdfparams.prf = 'hmac-sha256';\n            derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), salt, kdfparams.c, kdfparams.dklen, 'sha256');\n          } else if (kdf === 'scrypt') {\n            kdfparams.n = options.n || 8192;\n            kdfparams.r = options.r || 8;\n            kdfparams.p = options.p || 1;\n            derivedKey = scrypt$1(Buffer.from(password), salt, kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n          } else {\n            throw new Error('Unsupported kdf');\n          }\n          var cipher = browserifyCipher.createCipheriv(options.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n          if (!cipher) {\n            throw new Error('Unsupported cipher');\n          }\n          var ciphertext = Buffer.concat([cipher.update(Buffer.from(this.privateKey.replace('0x', ''), 'hex')), cipher.final()]);\n          var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')])).replace('0x', '');\n          return {\n            version: 3,\n            id: uuid.v4({\n              random: options.uuid || randomBytes(16)\n            }),\n            address: this.address.toLowerCase().replace('0x', ''),\n            crypto: {\n              ciphertext: ciphertext.toString('hex'),\n              cipherparams: {\n                iv: iv.toString('hex')\n              },\n              cipher: options.cipher || 'aes-128-ctr',\n              kdf: kdf,\n              kdfparams: kdfparams,\n              mac: mac.toString('hex')\n            }\n          };\n        }\n      }], [{\n        key: \"from\",\n        value: function from(entropy) {\n          var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new Account(EthLibAccount.create(entropy || Utils.randomHex(32)), accounts);\n        }\n      }, {\n        key: \"fromPrivateKey\",\n        value: function fromPrivateKey(privateKey) {\n          var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new Account(EthLibAccount.fromPrivate(privateKey), accounts);\n        }\n      }, {\n        key: \"fromV3Keystore\",\n        value: function fromV3Keystore(v3Keystore, password) {\n          var nonStrict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n          var accounts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          if (!isString(password)) {\n            throw new Error('No password given.');\n          }\n          var json = isObject(v3Keystore) ? v3Keystore : JSON.parse(nonStrict ? v3Keystore.toLowerCase() : v3Keystore);\n          if (json.version !== 3) {\n            throw new Error('Not a valid V3 wallet');\n          }\n          var derivedKey;\n          var kdfparams;\n          if (json.crypto.kdf === 'scrypt') {\n            kdfparams = json.crypto.kdfparams;\n            derivedKey = scrypt$1(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n          } else if (json.crypto.kdf === 'pbkdf2') {\n            kdfparams = json.crypto.kdfparams;\n            if (kdfparams.prf !== 'hmac-sha256') {\n              throw new Error('Unsupported parameters to PBKDF2');\n            }\n            derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n          } else {\n            throw new Error('Unsupported key derivation scheme');\n          }\n          var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n          var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])).replace('0x', '');\n          if (mac !== json.crypto.mac) {\n            throw new Error('Key derivation failed - possibly wrong password');\n          }\n          var decipher = browserifyCipher.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n          var seed = \"0x\".concat(Buffer.concat([decipher.update(ciphertext), decipher.final()]).toString('hex'));\n          return Account.fromPrivateKey(seed, accounts);\n        }\n      }]);\n      return Account;\n    }();\n\n    var Wallet =\n    function () {\n      function Wallet(utils, accountsModule) {\n        _classCallCheck(this, Wallet);\n        this.utils = utils;\n        this.accountsModule = accountsModule;\n        this.defaultKeyName = 'web3js_wallet';\n        this.accounts = {};\n        this.accountsIndex = 0;\n        return new Proxy(this, {\n          get: function get(target, name) {\n            if (target.accounts[name]) {\n              return target.accounts[name];\n            }\n            if (name === 'length') {\n              return target.accountsIndex;\n            }\n            return target[name];\n          }\n        });\n      }\n      _createClass(Wallet, [{\n        key: \"create\",\n        value: function create(numberOfAccounts, entropy) {\n          for (var i = 0; i < numberOfAccounts; ++i) {\n            this.add(Account.from(entropy || this.utils.randomHex(32), this.accountsModule));\n          }\n          return this;\n        }\n      }, {\n        key: \"get\",\n        value: function get(account) {\n          return this.accounts[account];\n        }\n      }, {\n        key: \"add\",\n        value: function add(account) {\n          if (isString(account)) {\n            account = Account.fromPrivateKey(account, this.accountsModule);\n          }\n          if (!this.accounts[account.address]) {\n            this.accounts[this.accountsIndex] = account;\n            this.accounts[account.address] = account;\n            this.accounts[account.address.toLowerCase()] = account;\n            this.accountsIndex++;\n            return account;\n          }\n          return this.accounts[account.address];\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(addressOrIndex) {\n          var account = this.accounts[addressOrIndex];\n          if (account) {\n            delete this.accounts[account.address];\n            delete this.accounts[account.address.toLowerCase()];\n            delete this.accounts[account.index];\n            return true;\n          }\n          return false;\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          for (var i = 0; i <= this.accountsIndex; i++) {\n            this.remove(i);\n          }\n          this.accountsIndex = 0;\n          return this;\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(password, options) {\n          var encryptedAccounts = [];\n          for (var i = 0; i < this.accountsIndex; i++) {\n            encryptedAccounts.push(this.accounts[i].encrypt(password, options));\n          }\n          return encryptedAccounts;\n        }\n      }, {\n        key: \"decrypt\",\n        value: function decrypt(encryptedWallet, password) {\n          var _this = this;\n          encryptedWallet.forEach(function (keystore) {\n            var account = Account.fromV3Keystore(keystore, password, false, _this.accountsModule);\n            if (!account) {\n              throw new Error(\"Couldn't decrypt accounts. Password wrong?\");\n            }\n            _this.add(account);\n          });\n          return this;\n        }\n      }, {\n        key: \"save\",\n        value: function save(password, keyName) {\n          console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n          if (typeof localStorage === 'undefined') {\n            throw new TypeError('window.localStorage is undefined.');\n          }\n          try {\n            localStorage.setItem(keyName || this.defaultKeyName, JSON.stringify(this.encrypt(password)));\n          } catch (error) {\n            if (error.code === 18) {\n              return true;\n            }\n            throw new Error(error);\n          }\n          return true;\n        }\n      }, {\n        key: \"load\",\n        value: function load(password, keyName) {\n          console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n          if (typeof localStorage === 'undefined') {\n            throw new TypeError('window.localStorage is undefined.');\n          }\n          var keystore;\n          try {\n            keystore = localStorage.getItem(keyName || this.defaultKeyName);\n            if (keystore) {\n              keystore = JSON.parse(keystore);\n            }\n          } catch (error) {\n            if (error.code === 18) {\n              keystore = this.defaultKeyName;\n            } else {\n              throw new Error(error);\n            }\n          }\n          return this.decrypt(keystore || [], password);\n        }\n      }]);\n      return Wallet;\n    }();\n\n    var Accounts =\n    function (_AbstractWeb3Module) {\n      _inherits(Accounts, _AbstractWeb3Module);\n      function Accounts(provider, utils, formatters, methodFactory, options, net) {\n        var _this;\n        _classCallCheck(this, Accounts);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Accounts).call(this, provider, options, methodFactory, net));\n        _this.utils = utils;\n        _this.formatters = formatters;\n        _this._transactionSigner = options.transactionSigner;\n        _this.defaultKeyName = 'web3js_wallet';\n        _this.accounts = {};\n        _this.accountsIndex = 0;\n        _this.wallet = new Wallet(utils, _assertThisInitialized(_this));\n        return _this;\n      }\n      _createClass(Accounts, [{\n        key: \"create\",\n        value: function create(entropy) {\n          return Account.from(entropy, this);\n        }\n      }, {\n        key: \"privateKeyToAccount\",\n        value: function privateKeyToAccount(privateKey) {\n          return Account.fromPrivateKey(privateKey, this);\n        }\n      }, {\n        key: \"hashMessage\",\n        value: function hashMessage(data) {\n          if (this.utils.isHexStrict(data)) {\n            data = this.utils.hexToBytes(data);\n          }\n          var messageBuffer = Buffer.from(data);\n          var preambleBuffer = Buffer.from(\"\\x19Ethereum Signed Message:\\n\".concat(data.length));\n          var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n          return Hash.keccak256s(ethMessage);\n        }\n      }, {\n        key: \"signTransaction\",\n        value: function () {\n          var _signTransaction = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(tx, privateKey, callback) {\n            var account, signedTransaction;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    account = Account.fromPrivateKey(privateKey, this);\n                    if (tx.chainId) {\n                      _context.next = 6;\n                      break;\n                    }\n                    _context.next = 5;\n                    return this.getChainId();\n                  case 5:\n                    tx.chainId = _context.sent;\n                  case 6:\n                    if (tx.gasPrice) {\n                      _context.next = 10;\n                      break;\n                    }\n                    _context.next = 9;\n                    return this.getGasPrice();\n                  case 9:\n                    tx.gasPrice = _context.sent;\n                  case 10:\n                    if (!(!tx.nonce && tx.nonce !== 0)) {\n                      _context.next = 14;\n                      break;\n                    }\n                    _context.next = 13;\n                    return this.getTransactionCount(account.address);\n                  case 13:\n                    tx.nonce = _context.sent;\n                  case 14:\n                    _context.next = 16;\n                    return this.transactionSigner.sign(this.formatters.inputCallFormatter(tx, this), account.privateKey);\n                  case 16:\n                    signedTransaction = _context.sent;\n                    if (isFunction(callback)) {\n                      callback(false, signedTransaction);\n                    }\n                    return _context.abrupt(\"return\", signedTransaction);\n                  case 21:\n                    _context.prev = 21;\n                    _context.t0 = _context[\"catch\"](0);\n                    if (!isFunction(callback)) {\n                      _context.next = 26;\n                      break;\n                    }\n                    callback(_context.t0, null);\n                    return _context.abrupt(\"return\");\n                  case 26:\n                    throw _context.t0;\n                  case 27:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this, [[0, 21]]);\n          }));\n          function signTransaction(_x, _x2, _x3) {\n            return _signTransaction.apply(this, arguments);\n          }\n          return signTransaction;\n        }()\n      }, {\n        key: \"recoverTransaction\",\n        value: function recoverTransaction(rawTx) {\n          var values = RLP.decode(rawTx);\n          var signature = EthLibAccount.encodeSignature(values.slice(6, 9));\n          var recovery = Bytes.toNumber(values[6]);\n          var extraData = recovery < 35 ? [] : [Bytes.fromNumber(recovery - 35 >> 1), '0x', '0x'];\n          var signingData = values.slice(0, 6).concat(extraData);\n          var signingDataHex = RLP.encode(signingData);\n          return EthLibAccount.recover(Hash.keccak256(signingDataHex), signature);\n        }\n      }, {\n        key: \"sign\",\n        value: function sign(data, privateKey) {\n          if (this.utils.isHexStrict(data)) {\n            data = this.utils.hexToBytes(data);\n          }\n          return Account.fromPrivateKey(privateKey, this).sign(data);\n        }\n      }, {\n        key: \"recover\",\n        value: function recover(message, signature, preFixed) {\n          if (isObject(message)) {\n            return this.recover(message.messageHash, EthLibAccount.encodeSignature([message.v, message.r, message.s]), true);\n          }\n          if (!preFixed) {\n            message = this.hashMessage(message);\n          }\n          if (arguments.length >= 4) {\n            return this.recover(arguments[0], EthLibAccount.encodeSignature([arguments[1], arguments[2], arguments[3]]), !!arguments[4]);\n          }\n          return EthLibAccount.recover(message, signature);\n        }\n      }, {\n        key: \"decrypt\",\n        value: function decrypt(v3Keystore, password, nonStrict) {\n          return Account.fromV3Keystore(v3Keystore, password, nonStrict, this);\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(privateKey, password, options) {\n          return Account.fromPrivateKey(privateKey, this).toV3Keystore(password, options);\n        }\n      }, {\n        key: \"transactionSigner\",\n        get: function get() {\n          return this._transactionSigner;\n        }\n        ,\n        set: function set(transactionSigner) {\n          if (transactionSigner.type && transactionSigner.type === 'TransactionSigner') {\n            throw new Error('Invalid TransactionSigner given!');\n          }\n          this._transactionSigner = transactionSigner;\n        }\n      }]);\n      return Accounts;\n    }(web3Core.AbstractWeb3Module);\n\n    function Accounts$1(provider) {\n      var net = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return new Accounts(provider, Utils, web3CoreHelpers.formatters, new MethodFactory(Utils, web3CoreHelpers.formatters), options, net);\n    }\n\n    exports.Accounts = Accounts$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}