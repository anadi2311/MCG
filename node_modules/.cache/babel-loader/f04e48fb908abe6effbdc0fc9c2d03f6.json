{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass'), require('websocket'), require('xhr2-cookies'), require('url-parse'), require('@babel/runtime/helpers/typeof'), require('lodash/isFunction'), require('lodash/isObject'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/get'), require('@babel/runtime/helpers/inherits'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('eventemitter3'), require('lodash/isArray'), require('http'), require('https')) : typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass', 'websocket', 'xhr2-cookies', 'url-parse', '@babel/runtime/helpers/typeof', 'lodash/isFunction', 'lodash/isObject', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/get', '@babel/runtime/helpers/inherits', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', 'eventemitter3', 'lodash/isArray', 'http', 'https'], factory) : (global = global || self, factory(global.Web3Providers = {}, global._classCallCheck, global._createClass, global.websocket, global.xhr2Cookies, global.URL, global._typeof, global.isFunction, global.isObject, global._possibleConstructorReturn, global._getPrototypeOf, global._get, global._inherits, global._regeneratorRuntime, global._asyncToGenerator, global.EventEmitter, global.isArray, global.http, global.https));\n})(this, function (exports, _classCallCheck, _createClass, websocket, xhr2Cookies, URL, _typeof, isFunction, isObject, _possibleConstructorReturn, _getPrototypeOf, _get, _inherits, _regeneratorRuntime, _asyncToGenerator, EventEmitter, isArray, http, https) {\n  'use strict';\n\n  _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n  _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n  URL = URL && URL.hasOwnProperty('default') ? URL['default'] : URL;\n  _typeof = _typeof && _typeof.hasOwnProperty('default') ? _typeof['default'] : _typeof;\n  isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n  isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n  _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n  _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n  _get = _get && _get.hasOwnProperty('default') ? _get['default'] : _get;\n  _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n  _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n  _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n  EventEmitter = EventEmitter && EventEmitter.hasOwnProperty('default') ? EventEmitter['default'] : EventEmitter;\n  isArray = isArray && isArray.hasOwnProperty('default') ? isArray['default'] : isArray;\n  http = http && http.hasOwnProperty('default') ? http['default'] : http;\n  https = https && https.hasOwnProperty('default') ? https['default'] : https;\n\n  var global = function () {\n    return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n  }() || new Function('return this')();\n\n  var ProviderResolver = function () {\n    function ProviderResolver(providersModuleFactory) {\n      _classCallCheck(this, ProviderResolver);\n\n      this.providersModuleFactory = providersModuleFactory;\n    }\n\n    _createClass(ProviderResolver, [{\n      key: \"resolve\",\n      value: function resolve(provider, net) {\n        if (!provider) {\n          return provider;\n        }\n\n        if (typeof provider === 'string') {\n          if (/^http(s)?:\\/\\//i.test(provider)) {\n            return this.providersModuleFactory.createHttpProvider(provider);\n          }\n\n          if (/^ws(s)?:\\/\\//i.test(provider)) {\n            return this.providersModuleFactory.createWebsocketProvider(provider);\n          }\n\n          if (provider && isObject(net) && isFunction(net.connect)) {\n            return this.providersModuleFactory.createIpcProvider(provider, net);\n          }\n        }\n\n        if (provider.sendPayload && provider.subscribe) {\n          return provider;\n        }\n\n        if (provider.host === 'Web3EthereumProvider') {\n          return provider;\n        }\n\n        if (typeof global.mist !== 'undefined' && provider.constructor.name === 'EthereumProvider') {\n          return this.providersModuleFactory.createMistEthereumProvider(provider);\n        }\n\n        if (provider.isEIP1193) {\n          return this.providersModuleFactory.createWeb3EthereumProvider(provider);\n        }\n\n        if (this.isMetamaskInpageProvider(provider)) {\n          return this.providersModuleFactory.createMetamaskProvider(provider);\n        }\n\n        return this.providersModuleFactory.createCustomProvider(provider);\n      }\n    }, {\n      key: \"isMetamaskInpageProvider\",\n      value: function isMetamaskInpageProvider(provider) {\n        return provider.constructor.name === 'MetamaskInpageProvider';\n      }\n    }]);\n\n    return ProviderResolver;\n  }();\n\n  var messageId = 0;\n\n  var JsonRpcMapper = function () {\n    function JsonRpcMapper() {\n      _classCallCheck(this, JsonRpcMapper);\n    }\n\n    _createClass(JsonRpcMapper, null, [{\n      key: \"toPayload\",\n      value: function toPayload(method, params) {\n        if (!method) {\n          throw new Error(\"JSONRPC method should be specified for params: \\\"\".concat(JSON.stringify(params), \"\\\"!\"));\n        }\n\n        var id = messageId;\n        messageId++;\n        return {\n          jsonrpc: '2.0',\n          id: id,\n          method: method,\n          params: params || []\n        };\n      }\n    }]);\n\n    return JsonRpcMapper;\n  }();\n\n  var JsonRpcResponseValidator = function () {\n    function JsonRpcResponseValidator() {\n      _classCallCheck(this, JsonRpcResponseValidator);\n    }\n\n    _createClass(JsonRpcResponseValidator, null, [{\n      key: \"validate\",\n      value: function validate(response) {\n        var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (isObject(response)) {\n          if (response.error) {\n            if (response.error instanceof Error) {\n              return new Error(\"Node error: \".concat(response.error.message));\n            }\n\n            return new Error(\"Node error: \".concat(JSON.stringify(response.error)));\n          }\n\n          if (payload && response.id !== payload.id) {\n            return new Error(\"Validation error: Invalid JSON-RPC response ID (request: \".concat(payload.id, \" / response: \").concat(response.id, \")\"));\n          }\n\n          if (response.result === undefined) {\n            return new Error('Validation error: Undefined JSON-RPC result');\n          }\n\n          return true;\n        }\n\n        return new Error('Validation error: Response should be of type Object');\n      }\n    }]);\n\n    return JsonRpcResponseValidator;\n  }();\n\n  var AbstractSocketProvider = function (_EventEmitter) {\n    _inherits(AbstractSocketProvider, _EventEmitter);\n\n    function AbstractSocketProvider(connection, timeout) {\n      var _this;\n\n      _classCallCheck(this, AbstractSocketProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(AbstractSocketProvider).call(this));\n      _this.connection = connection;\n      _this.timeout = timeout;\n      _this.subscriptions = {};\n\n      _this.registerEventListeners();\n\n      _this.READY = 'ready';\n      _this.CONNECT = 'connect';\n      _this.ERROR = 'error';\n      _this.CLOSE = 'close';\n      _this.SOCKET_MESSAGE = 'socket_message';\n      _this.SOCKET_READY = 'socket_ready';\n      _this.SOCKET_CLOSE = 'socket_close';\n      _this.SOCKET_ERROR = 'socket_error';\n      _this.SOCKET_CONNECT = 'socket_connect';\n      _this.SOCKET_NETWORK_CHANGED = 'socket_networkChanged';\n      _this.SOCKET_ACCOUNTS_CHANGED = 'socket_accountsChanged';\n      return _this;\n    }\n\n    _createClass(AbstractSocketProvider, [{\n      key: \"supportsSubscriptions\",\n      value: function supportsSubscriptions() {\n        return true;\n      }\n    }, {\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {}\n    }, {\n      key: \"removeAllSocketListeners\",\n      value: function removeAllSocketListeners() {\n        this.removeAllListeners(this.SOCKET_MESSAGE);\n        this.removeAllListeners(this.SOCKET_READY);\n        this.removeAllListeners(this.SOCKET_CLOSE);\n        this.removeAllListeners(this.SOCKET_ERROR);\n        this.removeAllListeners(this.SOCKET_CONNECT);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect(code, reason) {}\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          var response, validationResult;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n\n                case 2:\n                  response = _context.sent;\n                  validationResult = JsonRpcResponseValidator.validate(response);\n\n                  if (!(validationResult instanceof Error)) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw validationResult;\n\n                case 6:\n                  return _context.abrupt(\"return\", response.result);\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var payload = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n        });\n        return this.sendPayload(payload);\n      }\n    }, {\n      key: \"onReady\",\n      value: function onReady(event) {\n        this.emit(this.READY, event);\n        this.emit(this.SOCKET_READY, event);\n      }\n    }, {\n      key: \"onError\",\n      value: function onError(error) {\n        this.emit(this.ERROR, error);\n        this.emit(this.SOCKET_ERROR, error);\n        this.removeAllSocketListeners();\n      }\n    }, {\n      key: \"onClose\",\n      value: function onClose() {\n        var error = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        this.emit(this.CLOSE, error);\n        this.emit(this.SOCKET_CLOSE, error);\n        this.removeAllSocketListeners();\n        this.removeAllListeners();\n      }\n    }, {\n      key: \"onConnect\",\n      value: function () {\n        var _onConnect = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n          var subscriptionKeys, subscriptionId, _i, _subscriptionKeys, key;\n\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  subscriptionKeys = Object.keys(this.subscriptions);\n\n                  if (!(subscriptionKeys.length > 0)) {\n                    _context2.next = 13;\n                    break;\n                  }\n\n                  _i = 0, _subscriptionKeys = subscriptionKeys;\n\n                case 3:\n                  if (!(_i < _subscriptionKeys.length)) {\n                    _context2.next = 13;\n                    break;\n                  }\n\n                  key = _subscriptionKeys[_i];\n                  _context2.next = 7;\n                  return this.subscribe(this.subscriptions[key].subscribeMethod, this.subscriptions[key].parameters[0], this.subscriptions[key].parameters.slice(1));\n\n                case 7:\n                  subscriptionId = _context2.sent;\n\n                  if (key !== subscriptionId) {\n                    delete this.subscriptions[subscriptionId];\n                  }\n\n                  this.subscriptions[key].id = subscriptionId;\n\n                case 10:\n                  _i++;\n                  _context2.next = 3;\n                  break;\n\n                case 13:\n                  this.emit(this.SOCKET_CONNECT);\n                  this.emit(this.CONNECT);\n\n                case 15:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function onConnect() {\n          return _onConnect.apply(this, arguments);\n        }\n\n        return onConnect;\n      }()\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(response) {\n        var event;\n\n        if (!isObject(response)) {\n          response = JSON.parse(response);\n        }\n\n        if (isArray(response)) {\n          event = response[0].id;\n        } else if (typeof response.id === 'undefined') {\n          event = this.getSubscriptionEvent(response.params.subscription);\n          response = response.params;\n        } else {\n          event = response.id;\n        }\n\n        this.emit(this.SOCKET_MESSAGE, response);\n        this.emit(event, response);\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.removeAllListeners();\n        this.registerEventListeners();\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe() {\n        var _this2 = this;\n\n        var subscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_subscribe';\n        var subscriptionMethod = arguments.length > 1 ? arguments[1] : undefined;\n        var parameters = arguments.length > 2 ? arguments[2] : undefined;\n        parameters.unshift(subscriptionMethod);\n        return this.send(subscribeMethod, parameters).then(function (subscriptionId) {\n          _this2.subscriptions[subscriptionId] = {\n            id: subscriptionId,\n            subscribeMethod: subscribeMethod,\n            parameters: parameters\n          };\n          return subscriptionId;\n        }).catch(function (error) {\n          throw new Error(\"Provider error: \".concat(error));\n        });\n      }\n    }, {\n      key: \"unsubscribe\",\n      value: function unsubscribe(subscriptionId) {\n        var _this3 = this;\n\n        var unsubscribeMethod = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'eth_unsubscribe';\n\n        if (this.hasSubscription(subscriptionId)) {\n          return this.send(unsubscribeMethod, [subscriptionId]).then(function (response) {\n            if (response) {\n              _this3.removeAllListeners(_this3.getSubscriptionEvent(subscriptionId));\n\n              delete _this3.subscriptions[subscriptionId];\n            }\n\n            return response;\n          });\n        }\n\n        return Promise.reject(new Error(\"Provider error: Subscription with ID \".concat(subscriptionId, \" does not exist.\")));\n      }\n    }, {\n      key: \"clearSubscriptions\",\n      value: function clearSubscriptions() {\n        var _this4 = this;\n\n        var unsubscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_unsubscribe';\n        var unsubscribePromises = [];\n        Object.keys(this.subscriptions).forEach(function (key) {\n          _this4.removeAllListeners(key);\n\n          unsubscribePromises.push(_this4.unsubscribe(_this4.subscriptions[key].id, unsubscribeMethod));\n        });\n        return Promise.all(unsubscribePromises).then(function (results) {\n          if (results.includes(false)) {\n            throw new Error(\"Could not unsubscribe all subscriptions: \".concat(JSON.stringify(results)));\n          }\n\n          return true;\n        });\n      }\n    }, {\n      key: \"hasSubscription\",\n      value: function hasSubscription(subscriptionId) {\n        return typeof this.getSubscriptionEvent(subscriptionId) !== 'undefined';\n      }\n    }, {\n      key: \"getSubscriptionEvent\",\n      value: function getSubscriptionEvent(subscriptionId) {\n        var _this5 = this;\n\n        if (this.subscriptions[subscriptionId]) {\n          return subscriptionId;\n        }\n\n        var event;\n        Object.keys(this.subscriptions).forEach(function (key) {\n          if (_this5.subscriptions[key].id === subscriptionId) {\n            event = key;\n          }\n        });\n        return event;\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {}\n    }]);\n\n    return AbstractSocketProvider;\n  }(EventEmitter);\n\n  var WebsocketProvider = function (_AbstractSocketProvid) {\n    _inherits(WebsocketProvider, _AbstractSocketProvid);\n\n    function WebsocketProvider(connection, timeout) {\n      var _this;\n\n      _classCallCheck(this, WebsocketProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(WebsocketProvider).call(this, connection, timeout));\n      _this.host = _this.connection.url;\n      return _this;\n    }\n\n    _createClass(WebsocketProvider, [{\n      key: \"onMessage\",\n      value: function onMessage(messageEvent) {\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"onMessage\", this).call(this, messageEvent.data);\n      }\n    }, {\n      key: \"onError\",\n      value: function onError(event) {\n        if (event.code === 'ECONNREFUSED') {\n          this.reconnect();\n          return;\n        }\n\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"onError\", this).call(this, event);\n      }\n    }, {\n      key: \"onClose\",\n      value: function onClose(closeEvent) {\n        if (closeEvent.code !== 1000 || closeEvent.wasClean === false) {\n          this.reconnect();\n          return;\n        }\n\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"onClose\", this).call(this);\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        var _this2 = this;\n\n        setTimeout(function () {\n          _this2.removeAllSocketListeners();\n\n          var connection = [];\n\n          if (_this2.connection.constructor.name === 'W3CWebsocket') {\n            connection = new _this2.connection.constructor(_this2.host, _this2.connection._client.protocol, null, _this2.connection._client.headers, _this2.connection._client.requestOptions, _this2.connection._client.config);\n          } else {\n            connection = new _this2.connection.constructor(_this2.host, _this2.connection.protocol || undefined);\n          }\n\n          _this2.connection = connection;\n\n          _this2.registerEventListeners();\n        }, 5000);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var reason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        this.connection.close(code, reason);\n      }\n    }, {\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.addEventListener('message', this.onMessage.bind(this));\n        this.connection.addEventListener('open', this.onReady.bind(this));\n        this.connection.addEventListener('open', this.onConnect.bind(this));\n        this.connection.addEventListener('close', this.onClose.bind(this));\n        this.connection.addEventListener('error', this.onError.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_MESSAGE:\n            this.connection.removeEventListener('message', this.onMessage);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeEventListener('open', this.onReady);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeEventListener('close', this.onClose);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeEventListener('error', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeEventListener('connect', this.onConnect);\n            break;\n        }\n\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"isConnecting\",\n      value: function isConnecting() {\n        return this.connection.readyState === this.connection.CONNECTING;\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.once('error', reject);\n\n          if (!_this3.isConnecting()) {\n            var timeout, id;\n\n            if (_this3.connection.readyState !== _this3.connection.OPEN) {\n              _this3.removeListener('error', reject);\n\n              return reject(new Error('Connection error: Connection is not open on send()'));\n            }\n\n            try {\n              _this3.connection.send(JSON.stringify(payload));\n            } catch (error) {\n              _this3.removeListener('error', reject);\n\n              return reject(error);\n            }\n\n            if (_this3.timeout) {\n              timeout = setTimeout(function () {\n                reject(new Error('Connection error: Timeout exceeded'));\n              }, _this3.timeout);\n            }\n\n            if (isArray(payload)) {\n              id = payload[0].id;\n            } else {\n              id = payload.id;\n            }\n\n            _this3.once(id, function (response) {\n              if (timeout) {\n                clearTimeout(timeout);\n              }\n\n              _this3.removeListener('error', reject);\n\n              return resolve(response);\n            });\n\n            return;\n          }\n\n          _this3.once('connect', function () {\n            _this3.sendPayload(payload).then(function (response) {\n              _this3.removeListener('error', reject);\n\n              return resolve(response);\n            }).catch(function (error) {\n              _this3.removeListener('error', reject);\n\n              return reject(error);\n            });\n          });\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return this.connection.readyState === this.connection.OPEN;\n      }\n    }]);\n\n    return WebsocketProvider;\n  }(AbstractSocketProvider);\n\n  var IpcProvider = function (_AbstractSocketProvid) {\n    _inherits(IpcProvider, _AbstractSocketProvid);\n\n    function IpcProvider(connection, path) {\n      var _this;\n\n      _classCallCheck(this, IpcProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(IpcProvider).call(this, connection, null));\n      _this.host = path;\n      _this.lastChunk = '';\n      return _this;\n    }\n\n    _createClass(IpcProvider, [{\n      key: \"disconnect\",\n      value: function disconnect() {\n        this.connection.destroy();\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        this.connection.connect({\n          path: this.path\n        });\n      }\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(message) {\n        var _this2 = this;\n\n        var result = null;\n        var returnValues = [];\n        var dechunkedData = message.toString().replace(/\\}[\\n\\r]?\\{/g, '}|--|{').replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{').replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{').replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{').split('|--|');\n        dechunkedData.forEach(function (data) {\n          result = null;\n\n          if (_this2.lastChunk) {\n            data = _this2.lastChunk + data;\n          }\n\n          try {\n            result = JSON.parse(data);\n          } catch (error) {\n            _this2.lastChunk = data;\n            return;\n          }\n\n          _this2.lastChunk = null;\n          returnValues.push(result);\n        });\n        returnValues.forEach(function (chunk) {\n          _get(_getPrototypeOf(IpcProvider.prototype), \"onMessage\", _this2).call(_this2, chunk);\n        });\n      }\n    }, {\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('data', this.onMessage.bind(this));\n        this.connection.on('connect', this.onConnect.bind(this));\n        this.connection.on('error', this.onError.bind(this));\n        this.connection.on('close', this.onClose.bind(this));\n        this.connection.on('timeout', this.onClose.bind(this));\n        this.connection.on('ready', this.onReady.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('data', this.onMessage);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeListener('ready', this.onReady);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeListener('close', this.onClose);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('error', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n        }\n\n        _get(_getPrototypeOf(IpcProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.once('error', reject);\n\n          if (!_this3.connection.writable) {\n            _this3.connection.connect({\n              path: _this3.path\n            });\n          }\n\n          if (_this3.connection.write(JSON.stringify(payload))) {\n            var id;\n\n            if (isArray(payload)) {\n              id = payload[0].id;\n            } else {\n              id = payload.id;\n            }\n\n            _this3.once(id, function (response) {\n              resolve(response);\n\n              _this3.removeListener('error', reject);\n            });\n\n            return;\n          }\n\n          _this3.removeListener('error', reject);\n\n          return reject(new Error(\"Connection error: Couldn't write on the socket with Socket.write(payload)\"));\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return !this.connection.pending;\n      }\n    }]);\n\n    return IpcProvider;\n  }(AbstractSocketProvider);\n\n  var HttpProvider = function () {\n    function HttpProvider() {\n      var host = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http://localhost:8545';\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var providersModuleFactory = arguments.length > 2 ? arguments[2] : undefined;\n\n      _classCallCheck(this, HttpProvider);\n\n      this.host = host;\n      this.timeout = options.timeout || 0;\n      this.headers = options.headers;\n      this.withCredentials = options.withCredentials || false;\n      this.connected = true;\n      this.providersModuleFactory = providersModuleFactory;\n      this.agent = {};\n      var keepAlive = false;\n\n      if (options.keepAlive === true || options.keepAlive !== false) {\n        keepAlive = true;\n      }\n\n      if (host.substring(0, 5) === 'https') {\n        this.agent['httpsAgent'] = new https.Agent({\n          keepAlive: keepAlive\n        });\n      } else {\n        this.agent['httpAgent'] = new http.Agent({\n          keepAlive: keepAlive\n        });\n      }\n    }\n\n    _createClass(HttpProvider, [{\n      key: \"supportsSubscriptions\",\n      value: function supportsSubscriptions() {\n        return false;\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe() {\n        throw new Error('Subscriptions are not supported with the HttpProvider.');\n      }\n    }, {\n      key: \"unsubscribe\",\n      value: function unsubscribe() {\n        throw new Error('Subscriptions are not supported with the HttpProvider.');\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return true;\n      }\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          var response, validationResult;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n\n                case 2:\n                  response = _context.sent;\n                  validationResult = JsonRpcResponseValidator.validate(response);\n\n                  if (!(validationResult instanceof Error)) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw validationResult;\n\n                case 6:\n                  return _context.abrupt(\"return\", response.result);\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var payload = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n        });\n        return this.sendPayload(payload);\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this = this;\n\n        return new Promise(function (resolve, reject) {\n          var request = _this.providersModuleFactory.createXMLHttpRequest(_this.host, _this.timeout, _this.headers, _this.agent, _this.withCredentials);\n\n          request.onreadystatechange = function () {\n            if (request.readyState !== 0 && request.readyState !== 1) {\n              _this.connected = true;\n            }\n\n            if (request.readyState === 4) {\n              if (request.status === 200) {\n                try {\n                  return resolve(JSON.parse(request.responseText));\n                } catch (error) {\n                  reject(new Error(\"Invalid JSON as response: \".concat(request.responseText)));\n                }\n              }\n\n              if (_this.isInvalidHttpEndpoint(request)) {\n                reject(new Error(\"Connection refused or URL couldn't be resolved: \".concat(_this.host)));\n              }\n\n              if (request.status >= 400 && request.status <= 499) {\n                reject(new Error(\"HttpProvider ERROR: \".concat(request.responseText, \" (code: \").concat(request.status, \")\")));\n              }\n            }\n          };\n\n          request.ontimeout = function () {\n            _this.connected = false;\n            reject(new Error(\"Connection error: Timeout exceeded after \".concat(_this.timeout, \"ms\")));\n          };\n\n          try {\n            request.send(JSON.stringify(payload));\n          } catch (error) {\n            _this.connected = false;\n            reject(error);\n          }\n        });\n      }\n    }, {\n      key: \"isInvalidHttpEndpoint\",\n      value: function isInvalidHttpEndpoint(request) {\n        return request.response === null && request.status === 0;\n      }\n    }]);\n\n    return HttpProvider;\n  }();\n\n  var BatchRequest = function () {\n    function BatchRequest(moduleInstance) {\n      _classCallCheck(this, BatchRequest);\n\n      this.moduleInstance = moduleInstance;\n      this.methods = [];\n      this.accounts = [];\n    }\n\n    _createClass(BatchRequest, [{\n      key: \"add\",\n      value: function add(method) {\n        if (!isObject(method) && method) {\n          throw new Error('Please provide a object of type AbstractMethod.');\n        }\n\n        this.methods.push(method);\n      }\n    }, {\n      key: \"execute\",\n      value: function () {\n        var _execute = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n          var _this = this;\n\n          var payload, response, errors;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.toPayload();\n\n                case 2:\n                  payload = _context.sent;\n                  _context.next = 5;\n                  return this.moduleInstance.currentProvider.sendPayload(payload);\n\n                case 5:\n                  response = _context.sent;\n                  errors = [];\n                  this.methods.forEach(function (method, index) {\n                    if (!isArray(response)) {\n                      if (method.callback) {\n                        method.callback(new Error(\"BatchRequest error: Response should be of type Array but is: \".concat(_typeof(response))), null);\n                        return;\n                      }\n\n                      throw new Error(\"BatchRequest error: Response should be of type Array but is: \".concat(_typeof(response)));\n                    }\n\n                    var responseItem = response[index] || null;\n                    var validationResult = JsonRpcResponseValidator.validate(responseItem);\n\n                    if (validationResult === true) {\n                      try {\n                        var mappedResult;\n\n                        if (method.Type === 'eth-send-transaction-method' || method.Type === 'observed-transaction-method') {\n                          mappedResult = responseItem.result;\n                        } else {\n                          mappedResult = method.afterExecution(responseItem.result);\n                        }\n\n                        response[index] = mappedResult;\n\n                        if (method.callback) {\n                          method.callback(false, mappedResult);\n                        }\n                      } catch (error) {\n                        errors[index] = {\n                          method: method,\n                          error: error\n                        };\n\n                        if (method.callback) {\n                          method.callback(error, null);\n                        }\n                      }\n\n                      return;\n                    }\n\n                    errors[index] = {\n                      method: method,\n                      error: validationResult\n                    };\n\n                    if (_this.accounts[index] && _this.accounts[index].nonce) {\n                      _this.accounts[index].nonce--;\n                    }\n\n                    if (method.callback) {\n                      method.callback(validationResult, null);\n                    }\n                  });\n\n                  if (!(errors.length > 0)) {\n                    _context.next = 10;\n                    break;\n                  }\n\n                  throw {\n                    errors: errors,\n                    response: response\n                  };\n\n                case 10:\n                  return _context.abrupt(\"return\", {\n                    methods: this.methods,\n                    response: response\n                  });\n\n                case 11:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function execute() {\n          return _execute.apply(this, arguments);\n        }\n\n        return execute;\n      }()\n    }, {\n      key: \"toPayload\",\n      value: function () {\n        var _toPayload = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n          var payload, i, method, account, response;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  payload = [];\n                  i = 0;\n\n                case 2:\n                  if (!(i < this.methods.length)) {\n                    _context2.next = 18;\n                    break;\n                  }\n\n                  method = this.methods[i];\n                  method.beforeExecution(this.moduleInstance);\n\n                  if (!(this.moduleInstance.accounts && method.Type === 'eth-send-transaction-method' && method.hasAccounts())) {\n                    _context2.next = 14;\n                    break;\n                  }\n\n                  account = this.moduleInstance.accounts.wallet[method.parameters[0].from];\n\n                  if (!account) {\n                    _context2.next = 14;\n                    break;\n                  }\n\n                  _context2.next = 10;\n                  return method.signTransaction(account);\n\n                case 10:\n                  response = _context2.sent;\n                  method.parameters = [response.rawTransaction];\n                  method.rpcMethod = 'eth_sendRawTransaction';\n                  this.accounts[i] = account;\n\n                case 14:\n                  payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n\n                case 15:\n                  i++;\n                  _context2.next = 2;\n                  break;\n\n                case 18:\n                  return _context2.abrupt(\"return\", payload);\n\n                case 19:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function toPayload() {\n          return _toPayload.apply(this, arguments);\n        }\n\n        return toPayload;\n      }()\n    }]);\n\n    return BatchRequest;\n  }();\n\n  var Web3EthereumProvider = function (_AbstractSocketProvid) {\n    _inherits(Web3EthereumProvider, _AbstractSocketProvid);\n\n    function Web3EthereumProvider(connection) {\n      var _this;\n\n      _classCallCheck(this, Web3EthereumProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Web3EthereumProvider).call(this, connection, null));\n      _this.host = 'Web3EthereumProvider';\n      return _this;\n    }\n\n    _createClass(Web3EthereumProvider, [{\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('notification', this.onMessage.bind(this));\n        this.connection.on('connect', this.onConnect.bind(this));\n        this.connection.on('connect', this.onReady.bind(this));\n        this.connection.on('close', this.onClose.bind(this));\n        this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n        this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_NETWORK_CHANGED:\n            this.connection.removeListener('networkChanged', this.onNetworkChanged);\n            break;\n\n          case this.SOCKET_ACCOUNTS_CHANGED:\n            this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n            break;\n\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('notification', this.onMessage);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeListener('connect', this.onReady);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeListener('close', this.onClose);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('close', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n        }\n\n        _get(_getPrototypeOf(Web3EthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"removeAllSocketListeners\",\n      value: function removeAllSocketListeners() {\n        this.connection.removeAllListeners();\n      }\n    }, {\n      key: \"onNetworkChanged\",\n      value: function onNetworkChanged(networkId) {\n        this.emit('networkChanged', networkId);\n      }\n    }, {\n      key: \"onAccountsChanged\",\n      value: function onAccountsChanged(accounts) {\n        this.emit('accountsChanged', accounts);\n      }\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(response) {\n        this.emit(this.getSubscriptionEvent(response.subscription), response);\n      }\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return this.connection.send(method, parameters);\n\n                case 3:\n                  return _context.abrupt(\"return\", _context.sent);\n\n                case 6:\n                  _context.prev = 6;\n                  _context.t0 = _context[\"catch\"](0);\n                  throw new Error(\"Node error: \".concat(_context.t0.message));\n\n                case 9:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[0, 6]]);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var _this2 = this;\n\n        var methodCalls = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          methodCalls.push(_this2.connection.send(method.rpcMethod, method.parameters));\n        });\n        return Promise.all(methodCalls);\n      }\n    }]);\n\n    return Web3EthereumProvider;\n  }(AbstractSocketProvider);\n\n  var MetamaskProvider = function (_AbstractSocketProvid) {\n    _inherits(MetamaskProvider, _AbstractSocketProvid);\n\n    function MetamaskProvider(inpageProvider) {\n      var _this;\n\n      _classCallCheck(this, MetamaskProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MetamaskProvider).call(this, inpageProvider, null));\n      _this.host = 'metamask';\n      return _this;\n    }\n\n    _createClass(MetamaskProvider, [{\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n        this.connection.on('networkChanged', this.onReady.bind(this));\n        this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n        this.connection.on('data', this.onMessage.bind(this));\n        this.connection.on('error', this.onError.bind(this));\n      }\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(metamaskParam, payload) {\n        _get(_getPrototypeOf(MetamaskProvider.prototype), \"onMessage\", this).call(this, payload);\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_NETWORK_CHANGED:\n            this.connection.removeListener('networkChanged', this.onNetworkChanged);\n            break;\n\n          case this.SOCKET_ACCOUNTS_CHANGED:\n            this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n            break;\n\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('data', this.onMessage);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('error', this.onError);\n            break;\n        }\n\n        _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"removeAllSocketListeners\",\n      value: function removeAllSocketListeners() {\n        this.connection.removeListener(this.SOCKET_NETWORK_CHANGED, this.onNetworkChanged);\n        this.connection.removeListener(this.SOCKET_ACCOUNTS_CHANGED, this.onAccountsChanged);\n\n        _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllSocketListeners\", this).call(this);\n      }\n    }, {\n      key: \"onNetworkChanged\",\n      value: function onNetworkChanged(networkId) {\n        this.emit('networkChanged', networkId);\n      }\n    }, {\n      key: \"onAccountsChanged\",\n      value: function onAccountsChanged(accounts) {\n        this.emit('accountsChanged', accounts);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return true;\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this2 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this2.connection.send(payload, function (error, response) {\n            _this2.removeAllListeners(payload.id);\n\n            if (!error) {\n              return resolve(response);\n            }\n\n            reject(error);\n          });\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return this.connection.isConnected();\n      }\n    }]);\n\n    return MetamaskProvider;\n  }(AbstractSocketProvider);\n\n  var MistEthereumProvider = function (_AbstractSocketProvid) {\n    _inherits(MistEthereumProvider, _AbstractSocketProvid);\n\n    function MistEthereumProvider(connection) {\n      var _this;\n\n      _classCallCheck(this, MistEthereumProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MistEthereumProvider).call(this, connection, null));\n      _this.host = 'mist';\n      return _this;\n    }\n\n    _createClass(MistEthereumProvider, [{\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('data', this.onMessage.bind(this));\n        this.connection.on('error', this.onError.bind(this));\n        this.connection.on('connect', this.onConnect.bind(this));\n        this.connection.on('connect', this.onReady.bind(this));\n        this.connection.on('end', this.onClose.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('data', this.onMessage);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('error', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeListener('end', this.onClose);\n            break;\n        }\n\n        _get(_getPrototypeOf(MistEthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return true;\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this2 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this2.connection.send(payload, function (error, response) {\n            _this2.removeAllListeners(payload.id);\n\n            if (!error) {\n              return resolve(response);\n            }\n\n            reject(error);\n          });\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return this.connection.isConnected();\n      }\n    }]);\n\n    return MistEthereumProvider;\n  }(AbstractSocketProvider);\n\n  var CustomProvider = function () {\n    function CustomProvider(connection) {\n      _classCallCheck(this, CustomProvider);\n\n      this.host = 'CustomProvider';\n      this.connection = connection;\n      this.checkConnectionMethods();\n    }\n\n    _createClass(CustomProvider, [{\n      key: \"supportsSubscriptions\",\n      value: function supportsSubscriptions() {\n        return false;\n      }\n    }, {\n      key: \"checkConnectionMethods\",\n      value: function checkConnectionMethods() {\n        if (this.connection.send || this.connection.sendAsync) {\n          return true;\n        }\n\n        throw new Error('Invalid provider injected!');\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe() {\n        throw new Error('Subscriptions are not supported with the CustomProvider.');\n      }\n    }, {\n      key: \"unsubscribe\",\n      value: function unsubscribe() {\n        throw new Error('Subscriptions are not supported with the CustomProvider.');\n      }\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          var response, validationResult;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n\n                case 2:\n                  response = _context.sent;\n                  validationResult = JsonRpcResponseValidator.validate(response);\n\n                  if (!(validationResult instanceof Error)) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw validationResult;\n\n                case 6:\n                  return _context.abrupt(\"return\", response.result);\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var payload = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n        });\n        return this.sendPayload(payload);\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this = this;\n\n        return new Promise(function (resolve, reject) {\n          if (_this.connection.sendAsync) {\n            _this.connection.sendAsync(payload, function (error, response) {\n              if (!error) {\n                resolve(response);\n              }\n\n              reject(error);\n            });\n\n            return;\n          }\n\n          _this.connection.send(payload, function (error, response) {\n            if (!error) {\n              resolve(response);\n            }\n\n            reject(error);\n          });\n        });\n      }\n    }]);\n\n    return CustomProvider;\n  }();\n\n  var ProvidersModuleFactory = function () {\n    function ProvidersModuleFactory() {\n      _classCallCheck(this, ProvidersModuleFactory);\n    }\n\n    _createClass(ProvidersModuleFactory, [{\n      key: \"createBatchRequest\",\n      value: function createBatchRequest(moduleInstance) {\n        return new BatchRequest(moduleInstance);\n      }\n    }, {\n      key: \"createProviderResolver\",\n      value: function createProviderResolver() {\n        return new ProviderResolver(this);\n      }\n    }, {\n      key: \"createHttpProvider\",\n      value: function createHttpProvider(url) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new HttpProvider(url, options, this);\n      }\n    }, {\n      key: \"createXMLHttpRequest\",\n      value: function createXMLHttpRequest(host, timeout, headers, agent, withCredentials) {\n        var request;\n\n        if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n          request = new xhr2Cookies.XMLHttpRequest();\n          request.nodejsSet(agent);\n        } else {\n          request = new XMLHttpRequest();\n        }\n\n        request.open('POST', host, true);\n        request.setRequestHeader('Content-Type', 'application/json');\n        request.timeout = timeout;\n        request.withCredentials = withCredentials;\n\n        if (headers) {\n          headers.forEach(function (header) {\n            request.setRequestHeader(header.name, header.value);\n          });\n        }\n\n        return request;\n      }\n    }, {\n      key: \"createWebsocketProvider\",\n      value: function createWebsocketProvider(url) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var connection = '';\n\n        if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n          var headers = options.headers || {};\n          var urlObject = new URL(url);\n\n          if (!headers.authorization && urlObject.username && urlObject.password) {\n            var authToken = Buffer.from(\"\".concat(urlObject.username, \":\").concat(urlObject.password)).toString('base64');\n            headers.authorization = \"Basic \".concat(authToken);\n          }\n\n          connection = new websocket.w3cwebsocket(url, options.protocol, null, headers, null, options.clientConfig);\n        } else {\n          connection = new window.WebSocket(url, options.protocol);\n        }\n\n        return new WebsocketProvider(connection, options.timeout);\n      }\n    }, {\n      key: \"createIpcProvider\",\n      value: function createIpcProvider(path, net) {\n        return new IpcProvider(net.connect({\n          path: path\n        }), path);\n      }\n    }, {\n      key: \"createWeb3EthereumProvider\",\n      value: function createWeb3EthereumProvider(connection) {\n        return new Web3EthereumProvider(connection);\n      }\n    }, {\n      key: \"createMetamaskProvider\",\n      value: function createMetamaskProvider(inpageProvider) {\n        return new MetamaskProvider(inpageProvider);\n      }\n    }, {\n      key: \"createMistEthereumProvider\",\n      value: function createMistEthereumProvider(mistEthereumProvider) {\n        return new MistEthereumProvider(mistEthereumProvider);\n      }\n    }, {\n      key: \"createCustomProvider\",\n      value: function createCustomProvider(connection) {\n        return new CustomProvider(connection);\n      }\n    }]);\n\n    return ProvidersModuleFactory;\n  }();\n\n  var global$1 = function () {\n    return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n  }() || new Function('return this')();\n\n  var ProviderDetector = function () {\n    function ProviderDetector() {\n      _classCallCheck(this, ProviderDetector);\n    }\n\n    _createClass(ProviderDetector, null, [{\n      key: \"detect\",\n      value: function detect() {\n        if (typeof global$1.ethereumProvider !== 'undefined' && global$1.ethereumProvider.constructor.name === 'EthereumProvider') {\n          return global$1.ethereumProvider;\n        }\n\n        if (typeof global$1.web3 !== 'undefined' && global$1.web3.currentProvider) {\n          return global$1.web3.currentProvider;\n        }\n\n        return null;\n      }\n    }]);\n\n    return ProviderDetector;\n  }();\n\n  function HttpProvider$1(url) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new ProvidersModuleFactory().createHttpProvider(url, options);\n  }\n\n  function WebsocketProvider$1(url) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new ProvidersModuleFactory().createWebsocketProvider(url, options);\n  }\n\n  function IpcProvider$1(path, net) {\n    return new ProvidersModuleFactory().createIpcProvider(path, net);\n  }\n\n  function BatchRequest$1(moduleInstance) {\n    return new ProvidersModuleFactory().createBatchRequest(moduleInstance);\n  }\n\n  function ProviderResolver$1() {\n    return new ProvidersModuleFactory().createProviderResolver();\n  }\n\n  exports.BatchRequest = BatchRequest$1;\n  exports.HttpProvider = HttpProvider$1;\n  exports.IpcProvider = IpcProvider$1;\n  exports.ProviderDetector = ProviderDetector;\n  exports.ProviderResolver = ProviderResolver$1;\n  exports.ProvidersModuleFactory = ProvidersModuleFactory;\n  exports.Web3EthereumProvider = Web3EthereumProvider;\n  exports.WebsocketProvider = WebsocketProvider$1;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/home/buzzlite/MCG-VUiLA/node_modules/web3-providers/dist/web3-providers.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","Web3Providers","_classCallCheck","_createClass","websocket","xhr2Cookies","URL","_typeof","isFunction","isObject","_possibleConstructorReturn","_getPrototypeOf","_get","_inherits","_regeneratorRuntime","_asyncToGenerator","EventEmitter","isArray","http","https","hasOwnProperty","Function","ProviderResolver","providersModuleFactory","key","value","resolve","provider","net","test","createHttpProvider","createWebsocketProvider","connect","createIpcProvider","sendPayload","subscribe","host","mist","constructor","name","createMistEthereumProvider","isEIP1193","createWeb3EthereumProvider","isMetamaskInpageProvider","createMetamaskProvider","createCustomProvider","messageId","JsonRpcMapper","toPayload","method","params","Error","concat","JSON","stringify","id","jsonrpc","JsonRpcResponseValidator","validate","response","payload","arguments","length","undefined","error","message","result","AbstractSocketProvider","_EventEmitter","connection","timeout","_this","call","subscriptions","registerEventListeners","READY","CONNECT","ERROR","CLOSE","SOCKET_MESSAGE","SOCKET_READY","SOCKET_CLOSE","SOCKET_ERROR","SOCKET_CONNECT","SOCKET_NETWORK_CHANGED","SOCKET_ACCOUNTS_CHANGED","supportsSubscriptions","removeAllSocketListeners","removeAllListeners","disconnect","code","reason","_send","mark","_callee","parameters","validationResult","wrap","_callee$","_context","prev","next","sent","abrupt","stop","send","_x","_x2","apply","sendBatch","methods","moduleInstance","forEach","beforeExecution","push","rpcMethod","onReady","event","emit","onError","onClose","_onConnect","_callee2","subscriptionKeys","subscriptionId","_i","_subscriptionKeys","_callee2$","_context2","Object","keys","subscribeMethod","slice","onConnect","onMessage","parse","getSubscriptionEvent","subscription","reset","_this2","subscriptionMethod","unshift","then","catch","unsubscribe","_this3","unsubscribeMethod","hasSubscription","Promise","reject","clearSubscriptions","_this4","unsubscribePromises","all","results","includes","_this5","get","WebsocketProvider","_AbstractSocketProvid","url","messageEvent","prototype","data","reconnect","closeEvent","wasClean","setTimeout","_client","protocol","headers","requestOptions","config","close","addEventListener","bind","removeEventListener","isConnecting","readyState","CONNECTING","once","OPEN","removeListener","clearTimeout","IpcProvider","path","lastChunk","destroy","returnValues","dechunkedData","toString","replace","split","chunk","on","writable","write","pending","HttpProvider","options","withCredentials","connected","agent","keepAlive","substring","Agent","request","createXMLHttpRequest","onreadystatechange","status","responseText","isInvalidHttpEndpoint","ontimeout","BatchRequest","accounts","add","_execute","errors","currentProvider","index","callback","responseItem","mappedResult","Type","afterExecution","nonce","execute","_toPayload","i","account","hasAccounts","wallet","from","signTransaction","rawTransaction","Web3EthereumProvider","onNetworkChanged","onAccountsChanged","networkId","t0","methodCalls","MetamaskProvider","inpageProvider","metamaskParam","isConnected","MistEthereumProvider","CustomProvider","checkConnectionMethods","sendAsync","ProvidersModuleFactory","createBatchRequest","createProviderResolver","process","versions","node","XMLHttpRequest","nodejsSet","open","setRequestHeader","header","urlObject","authorization","username","password","authToken","Buffer","w3cwebsocket","clientConfig","window","WebSocket","mistEthereumProvider","global$1","ProviderDetector","detect","ethereumProvider","web3","HttpProvider$1","WebsocketProvider$1","IpcProvider$1","BatchRequest$1","ProviderResolver$1","defineProperty"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass'), require('websocket'), require('xhr2-cookies'), require('url-parse'), require('@babel/runtime/helpers/typeof'), require('lodash/isFunction'), require('lodash/isObject'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/get'), require('@babel/runtime/helpers/inherits'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('eventemitter3'), require('lodash/isArray'), require('http'), require('https')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass', 'websocket', 'xhr2-cookies', 'url-parse', '@babel/runtime/helpers/typeof', 'lodash/isFunction', 'lodash/isObject', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/get', '@babel/runtime/helpers/inherits', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', 'eventemitter3', 'lodash/isArray', 'http', 'https'], factory) :\n    (global = global || self, factory(global.Web3Providers = {}, global._classCallCheck, global._createClass, global.websocket, global.xhr2Cookies, global.URL, global._typeof, global.isFunction, global.isObject, global._possibleConstructorReturn, global._getPrototypeOf, global._get, global._inherits, global._regeneratorRuntime, global._asyncToGenerator, global.EventEmitter, global.isArray, global.http, global.https));\n}(this, function (exports, _classCallCheck, _createClass, websocket, xhr2Cookies, URL, _typeof, isFunction, isObject, _possibleConstructorReturn, _getPrototypeOf, _get, _inherits, _regeneratorRuntime, _asyncToGenerator, EventEmitter, isArray, http, https) { 'use strict';\n\n    _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n    _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n    URL = URL && URL.hasOwnProperty('default') ? URL['default'] : URL;\n    _typeof = _typeof && _typeof.hasOwnProperty('default') ? _typeof['default'] : _typeof;\n    isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n    isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n    _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n    _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n    _get = _get && _get.hasOwnProperty('default') ? _get['default'] : _get;\n    _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n    _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n    _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n    EventEmitter = EventEmitter && EventEmitter.hasOwnProperty('default') ? EventEmitter['default'] : EventEmitter;\n    isArray = isArray && isArray.hasOwnProperty('default') ? isArray['default'] : isArray;\n    http = http && http.hasOwnProperty('default') ? http['default'] : http;\n    https = https && https.hasOwnProperty('default') ? https['default'] : https;\n\n    var global = function () {\n      return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n    }() || new Function('return this')();\n    var ProviderResolver =\n    function () {\n      function ProviderResolver(providersModuleFactory) {\n        _classCallCheck(this, ProviderResolver);\n        this.providersModuleFactory = providersModuleFactory;\n      }\n      _createClass(ProviderResolver, [{\n        key: \"resolve\",\n        value: function resolve(provider, net) {\n          if (!provider) {\n            return provider;\n          }\n          if (typeof provider === 'string') {\n            if (/^http(s)?:\\/\\//i.test(provider)) {\n              return this.providersModuleFactory.createHttpProvider(provider);\n            }\n            if (/^ws(s)?:\\/\\//i.test(provider)) {\n              return this.providersModuleFactory.createWebsocketProvider(provider);\n            }\n            if (provider && isObject(net) && isFunction(net.connect)) {\n              return this.providersModuleFactory.createIpcProvider(provider, net);\n            }\n          }\n          if (provider.sendPayload && provider.subscribe) {\n            return provider;\n          }\n          if (provider.host === 'Web3EthereumProvider') {\n            return provider;\n          }\n          if (typeof global.mist !== 'undefined' && provider.constructor.name === 'EthereumProvider') {\n            return this.providersModuleFactory.createMistEthereumProvider(provider);\n          }\n          if (provider.isEIP1193) {\n            return this.providersModuleFactory.createWeb3EthereumProvider(provider);\n          }\n          if (this.isMetamaskInpageProvider(provider)) {\n            return this.providersModuleFactory.createMetamaskProvider(provider);\n          }\n          return this.providersModuleFactory.createCustomProvider(provider);\n        }\n      }, {\n        key: \"isMetamaskInpageProvider\",\n        value: function isMetamaskInpageProvider(provider) {\n          return provider.constructor.name === 'MetamaskInpageProvider';\n        }\n      }]);\n      return ProviderResolver;\n    }();\n\n    var messageId = 0;\n    var JsonRpcMapper =\n    function () {\n      function JsonRpcMapper() {\n        _classCallCheck(this, JsonRpcMapper);\n      }\n      _createClass(JsonRpcMapper, null, [{\n        key: \"toPayload\",\n        value: function toPayload(method, params) {\n          if (!method) {\n            throw new Error(\"JSONRPC method should be specified for params: \\\"\".concat(JSON.stringify(params), \"\\\"!\"));\n          }\n          var id = messageId;\n          messageId++;\n          return {\n            jsonrpc: '2.0',\n            id: id,\n            method: method,\n            params: params || []\n          };\n        }\n      }]);\n      return JsonRpcMapper;\n    }();\n\n    var JsonRpcResponseValidator =\n    function () {\n      function JsonRpcResponseValidator() {\n        _classCallCheck(this, JsonRpcResponseValidator);\n      }\n      _createClass(JsonRpcResponseValidator, null, [{\n        key: \"validate\",\n        value: function validate(response) {\n          var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          if (isObject(response)) {\n            if (response.error) {\n              if (response.error instanceof Error) {\n                return new Error(\"Node error: \".concat(response.error.message));\n              }\n              return new Error(\"Node error: \".concat(JSON.stringify(response.error)));\n            }\n            if (payload && response.id !== payload.id) {\n              return new Error(\"Validation error: Invalid JSON-RPC response ID (request: \".concat(payload.id, \" / response: \").concat(response.id, \")\"));\n            }\n            if (response.result === undefined) {\n              return new Error('Validation error: Undefined JSON-RPC result');\n            }\n            return true;\n          }\n          return new Error('Validation error: Response should be of type Object');\n        }\n      }]);\n      return JsonRpcResponseValidator;\n    }();\n\n    var AbstractSocketProvider =\n    function (_EventEmitter) {\n      _inherits(AbstractSocketProvider, _EventEmitter);\n      function AbstractSocketProvider(connection, timeout) {\n        var _this;\n        _classCallCheck(this, AbstractSocketProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AbstractSocketProvider).call(this));\n        _this.connection = connection;\n        _this.timeout = timeout;\n        _this.subscriptions = {};\n        _this.registerEventListeners();\n        _this.READY = 'ready';\n        _this.CONNECT = 'connect';\n        _this.ERROR = 'error';\n        _this.CLOSE = 'close';\n        _this.SOCKET_MESSAGE = 'socket_message';\n        _this.SOCKET_READY = 'socket_ready';\n        _this.SOCKET_CLOSE = 'socket_close';\n        _this.SOCKET_ERROR = 'socket_error';\n        _this.SOCKET_CONNECT = 'socket_connect';\n        _this.SOCKET_NETWORK_CHANGED = 'socket_networkChanged';\n        _this.SOCKET_ACCOUNTS_CHANGED = 'socket_accountsChanged';\n        return _this;\n      }\n      _createClass(AbstractSocketProvider, [{\n        key: \"supportsSubscriptions\",\n        value: function supportsSubscriptions() {\n          return true;\n        }\n      }, {\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {}\n      }, {\n        key: \"removeAllSocketListeners\",\n        value: function removeAllSocketListeners() {\n          this.removeAllListeners(this.SOCKET_MESSAGE);\n          this.removeAllListeners(this.SOCKET_READY);\n          this.removeAllListeners(this.SOCKET_CLOSE);\n          this.removeAllListeners(this.SOCKET_ERROR);\n          this.removeAllListeners(this.SOCKET_CONNECT);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect(code, reason) {}\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            var response, validationResult;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n                  case 2:\n                    response = _context.sent;\n                    validationResult = JsonRpcResponseValidator.validate(response);\n                    if (!(validationResult instanceof Error)) {\n                      _context.next = 6;\n                      break;\n                    }\n                    throw validationResult;\n                  case 6:\n                    return _context.abrupt(\"return\", response.result);\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var payload = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n          });\n          return this.sendPayload(payload);\n        }\n      }, {\n        key: \"onReady\",\n        value: function onReady(event) {\n          this.emit(this.READY, event);\n          this.emit(this.SOCKET_READY, event);\n        }\n      }, {\n        key: \"onError\",\n        value: function onError(error) {\n          this.emit(this.ERROR, error);\n          this.emit(this.SOCKET_ERROR, error);\n          this.removeAllSocketListeners();\n        }\n      }, {\n        key: \"onClose\",\n        value: function onClose() {\n          var error = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          this.emit(this.CLOSE, error);\n          this.emit(this.SOCKET_CLOSE, error);\n          this.removeAllSocketListeners();\n          this.removeAllListeners();\n        }\n      }, {\n        key: \"onConnect\",\n        value: function () {\n          var _onConnect = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee2() {\n            var subscriptionKeys, subscriptionId, _i, _subscriptionKeys, key;\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    subscriptionKeys = Object.keys(this.subscriptions);\n                    if (!(subscriptionKeys.length > 0)) {\n                      _context2.next = 13;\n                      break;\n                    }\n                    _i = 0, _subscriptionKeys = subscriptionKeys;\n                  case 3:\n                    if (!(_i < _subscriptionKeys.length)) {\n                      _context2.next = 13;\n                      break;\n                    }\n                    key = _subscriptionKeys[_i];\n                    _context2.next = 7;\n                    return this.subscribe(this.subscriptions[key].subscribeMethod, this.subscriptions[key].parameters[0], this.subscriptions[key].parameters.slice(1));\n                  case 7:\n                    subscriptionId = _context2.sent;\n                    if (key !== subscriptionId) {\n                      delete this.subscriptions[subscriptionId];\n                    }\n                    this.subscriptions[key].id = subscriptionId;\n                  case 10:\n                    _i++;\n                    _context2.next = 3;\n                    break;\n                  case 13:\n                    this.emit(this.SOCKET_CONNECT);\n                    this.emit(this.CONNECT);\n                  case 15:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, this);\n          }));\n          function onConnect() {\n            return _onConnect.apply(this, arguments);\n          }\n          return onConnect;\n        }()\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(response) {\n          var event;\n          if (!isObject(response)) {\n            response = JSON.parse(response);\n          }\n          if (isArray(response)) {\n            event = response[0].id;\n          } else if (typeof response.id === 'undefined') {\n            event = this.getSubscriptionEvent(response.params.subscription);\n            response = response.params;\n          } else {\n            event = response.id;\n          }\n          this.emit(this.SOCKET_MESSAGE, response);\n          this.emit(event, response);\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this.removeAllListeners();\n          this.registerEventListeners();\n        }\n      }, {\n        key: \"subscribe\",\n        value: function subscribe() {\n          var _this2 = this;\n          var subscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_subscribe';\n          var subscriptionMethod = arguments.length > 1 ? arguments[1] : undefined;\n          var parameters = arguments.length > 2 ? arguments[2] : undefined;\n          parameters.unshift(subscriptionMethod);\n          return this.send(subscribeMethod, parameters).then(function (subscriptionId) {\n            _this2.subscriptions[subscriptionId] = {\n              id: subscriptionId,\n              subscribeMethod: subscribeMethod,\n              parameters: parameters\n            };\n            return subscriptionId;\n          }).catch(function (error) {\n            throw new Error(\"Provider error: \".concat(error));\n          });\n        }\n      }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe(subscriptionId) {\n          var _this3 = this;\n          var unsubscribeMethod = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'eth_unsubscribe';\n          if (this.hasSubscription(subscriptionId)) {\n            return this.send(unsubscribeMethod, [subscriptionId]).then(function (response) {\n              if (response) {\n                _this3.removeAllListeners(_this3.getSubscriptionEvent(subscriptionId));\n                delete _this3.subscriptions[subscriptionId];\n              }\n              return response;\n            });\n          }\n          return Promise.reject(new Error(\"Provider error: Subscription with ID \".concat(subscriptionId, \" does not exist.\")));\n        }\n      }, {\n        key: \"clearSubscriptions\",\n        value: function clearSubscriptions() {\n          var _this4 = this;\n          var unsubscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_unsubscribe';\n          var unsubscribePromises = [];\n          Object.keys(this.subscriptions).forEach(function (key) {\n            _this4.removeAllListeners(key);\n            unsubscribePromises.push(_this4.unsubscribe(_this4.subscriptions[key].id, unsubscribeMethod));\n          });\n          return Promise.all(unsubscribePromises).then(function (results) {\n            if (results.includes(false)) {\n              throw new Error(\"Could not unsubscribe all subscriptions: \".concat(JSON.stringify(results)));\n            }\n            return true;\n          });\n        }\n      }, {\n        key: \"hasSubscription\",\n        value: function hasSubscription(subscriptionId) {\n          return typeof this.getSubscriptionEvent(subscriptionId) !== 'undefined';\n        }\n      }, {\n        key: \"getSubscriptionEvent\",\n        value: function getSubscriptionEvent(subscriptionId) {\n          var _this5 = this;\n          if (this.subscriptions[subscriptionId]) {\n            return subscriptionId;\n          }\n          var event;\n          Object.keys(this.subscriptions).forEach(function (key) {\n            if (_this5.subscriptions[key].id === subscriptionId) {\n              event = key;\n            }\n          });\n          return event;\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {}\n      }]);\n      return AbstractSocketProvider;\n    }(EventEmitter);\n\n    var WebsocketProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(WebsocketProvider, _AbstractSocketProvid);\n      function WebsocketProvider(connection, timeout) {\n        var _this;\n        _classCallCheck(this, WebsocketProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(WebsocketProvider).call(this, connection, timeout));\n        _this.host = _this.connection.url;\n        return _this;\n      }\n      _createClass(WebsocketProvider, [{\n        key: \"onMessage\",\n        value: function onMessage(messageEvent) {\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"onMessage\", this).call(this, messageEvent.data);\n        }\n      }, {\n        key: \"onError\",\n        value: function onError(event) {\n          if (event.code === 'ECONNREFUSED') {\n            this.reconnect();\n            return;\n          }\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"onError\", this).call(this, event);\n        }\n      }, {\n        key: \"onClose\",\n        value: function onClose(closeEvent) {\n          if (closeEvent.code !== 1000 || closeEvent.wasClean === false) {\n            this.reconnect();\n            return;\n          }\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"onClose\", this).call(this);\n        }\n      }, {\n        key: \"reconnect\",\n        value: function reconnect() {\n          var _this2 = this;\n          setTimeout(function () {\n            _this2.removeAllSocketListeners();\n            var connection = [];\n            if (_this2.connection.constructor.name === 'W3CWebsocket') {\n              connection = new _this2.connection.constructor(_this2.host, _this2.connection._client.protocol, null, _this2.connection._client.headers, _this2.connection._client.requestOptions, _this2.connection._client.config);\n            } else {\n              connection = new _this2.connection.constructor(_this2.host, _this2.connection.protocol || undefined);\n            }\n            _this2.connection = connection;\n            _this2.registerEventListeners();\n          }, 5000);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          var reason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          this.connection.close(code, reason);\n        }\n      }, {\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.addEventListener('message', this.onMessage.bind(this));\n          this.connection.addEventListener('open', this.onReady.bind(this));\n          this.connection.addEventListener('open', this.onConnect.bind(this));\n          this.connection.addEventListener('close', this.onClose.bind(this));\n          this.connection.addEventListener('error', this.onError.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_MESSAGE:\n              this.connection.removeEventListener('message', this.onMessage);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeEventListener('open', this.onReady);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeEventListener('close', this.onClose);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeEventListener('error', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeEventListener('connect', this.onConnect);\n              break;\n          }\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"isConnecting\",\n        value: function isConnecting() {\n          return this.connection.readyState === this.connection.CONNECTING;\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this3 = this;\n          return new Promise(function (resolve, reject) {\n            _this3.once('error', reject);\n            if (!_this3.isConnecting()) {\n              var timeout, id;\n              if (_this3.connection.readyState !== _this3.connection.OPEN) {\n                _this3.removeListener('error', reject);\n                return reject(new Error('Connection error: Connection is not open on send()'));\n              }\n              try {\n                _this3.connection.send(JSON.stringify(payload));\n              } catch (error) {\n                _this3.removeListener('error', reject);\n                return reject(error);\n              }\n              if (_this3.timeout) {\n                timeout = setTimeout(function () {\n                  reject(new Error('Connection error: Timeout exceeded'));\n                }, _this3.timeout);\n              }\n              if (isArray(payload)) {\n                id = payload[0].id;\n              } else {\n                id = payload.id;\n              }\n              _this3.once(id, function (response) {\n                if (timeout) {\n                  clearTimeout(timeout);\n                }\n                _this3.removeListener('error', reject);\n                return resolve(response);\n              });\n              return;\n            }\n            _this3.once('connect', function () {\n              _this3.sendPayload(payload).then(function (response) {\n                _this3.removeListener('error', reject);\n                return resolve(response);\n              }).catch(function (error) {\n                _this3.removeListener('error', reject);\n                return reject(error);\n              });\n            });\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return this.connection.readyState === this.connection.OPEN;\n        }\n      }]);\n      return WebsocketProvider;\n    }(AbstractSocketProvider);\n\n    var IpcProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(IpcProvider, _AbstractSocketProvid);\n      function IpcProvider(connection, path) {\n        var _this;\n        _classCallCheck(this, IpcProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(IpcProvider).call(this, connection, null));\n        _this.host = path;\n        _this.lastChunk = '';\n        return _this;\n      }\n      _createClass(IpcProvider, [{\n        key: \"disconnect\",\n        value: function disconnect() {\n          this.connection.destroy();\n        }\n      }, {\n        key: \"reconnect\",\n        value: function reconnect() {\n          this.connection.connect({\n            path: this.path\n          });\n        }\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(message) {\n          var _this2 = this;\n          var result = null;\n          var returnValues = [];\n          var dechunkedData = message.toString().replace(/\\}[\\n\\r]?\\{/g, '}|--|{')\n          .replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{')\n          .replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{')\n          .replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{')\n          .split('|--|');\n          dechunkedData.forEach(function (data) {\n            result = null;\n            if (_this2.lastChunk) {\n              data = _this2.lastChunk + data;\n            }\n            try {\n              result = JSON.parse(data);\n            } catch (error) {\n              _this2.lastChunk = data;\n              return;\n            }\n            _this2.lastChunk = null;\n            returnValues.push(result);\n          });\n          returnValues.forEach(function (chunk) {\n            _get(_getPrototypeOf(IpcProvider.prototype), \"onMessage\", _this2).call(_this2, chunk);\n          });\n        }\n      }, {\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('data', this.onMessage.bind(this));\n          this.connection.on('connect', this.onConnect.bind(this));\n          this.connection.on('error', this.onError.bind(this));\n          this.connection.on('close', this.onClose.bind(this));\n          this.connection.on('timeout', this.onClose.bind(this));\n          this.connection.on('ready', this.onReady.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('data', this.onMessage);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeListener('ready', this.onReady);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeListener('close', this.onClose);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('error', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n          }\n          _get(_getPrototypeOf(IpcProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this3 = this;\n          return new Promise(function (resolve, reject) {\n            _this3.once('error', reject);\n            if (!_this3.connection.writable) {\n              _this3.connection.connect({\n                path: _this3.path\n              });\n            }\n            if (_this3.connection.write(JSON.stringify(payload))) {\n              var id;\n              if (isArray(payload)) {\n                id = payload[0].id;\n              } else {\n                id = payload.id;\n              }\n              _this3.once(id, function (response) {\n                resolve(response);\n                _this3.removeListener('error', reject);\n              });\n              return;\n            }\n            _this3.removeListener('error', reject);\n            return reject(new Error(\"Connection error: Couldn't write on the socket with Socket.write(payload)\"));\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return !this.connection.pending;\n        }\n      }]);\n      return IpcProvider;\n    }(AbstractSocketProvider);\n\n    var HttpProvider =\n    function () {\n      function HttpProvider() {\n        var host = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http://localhost:8545';\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var providersModuleFactory = arguments.length > 2 ? arguments[2] : undefined;\n        _classCallCheck(this, HttpProvider);\n        this.host = host;\n        this.timeout = options.timeout || 0;\n        this.headers = options.headers;\n        this.withCredentials = options.withCredentials || false;\n        this.connected = true;\n        this.providersModuleFactory = providersModuleFactory;\n        this.agent = {};\n        var keepAlive = false;\n        if (options.keepAlive === true || options.keepAlive !== false) {\n          keepAlive = true;\n        }\n        if (host.substring(0, 5) === 'https') {\n          this.agent['httpsAgent'] = new https.Agent({\n            keepAlive: keepAlive\n          });\n        } else {\n          this.agent['httpAgent'] = new http.Agent({\n            keepAlive: keepAlive\n          });\n        }\n      }\n      _createClass(HttpProvider, [{\n        key: \"supportsSubscriptions\",\n        value: function supportsSubscriptions() {\n          return false;\n        }\n      }, {\n        key: \"subscribe\",\n        value: function subscribe() {\n          throw new Error('Subscriptions are not supported with the HttpProvider.');\n        }\n      }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe() {\n          throw new Error('Subscriptions are not supported with the HttpProvider.');\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          return true;\n        }\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            var response, validationResult;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n                  case 2:\n                    response = _context.sent;\n                    validationResult = JsonRpcResponseValidator.validate(response);\n                    if (!(validationResult instanceof Error)) {\n                      _context.next = 6;\n                      break;\n                    }\n                    throw validationResult;\n                  case 6:\n                    return _context.abrupt(\"return\", response.result);\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var payload = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n          });\n          return this.sendPayload(payload);\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this = this;\n          return new Promise(function (resolve, reject) {\n            var request = _this.providersModuleFactory.createXMLHttpRequest(_this.host, _this.timeout, _this.headers, _this.agent, _this.withCredentials);\n            request.onreadystatechange = function () {\n              if (request.readyState !== 0 && request.readyState !== 1) {\n                _this.connected = true;\n              }\n              if (request.readyState === 4) {\n                if (request.status === 200) {\n                  try {\n                    return resolve(JSON.parse(request.responseText));\n                  } catch (error) {\n                    reject(new Error(\"Invalid JSON as response: \".concat(request.responseText)));\n                  }\n                }\n                if (_this.isInvalidHttpEndpoint(request)) {\n                  reject(new Error(\"Connection refused or URL couldn't be resolved: \".concat(_this.host)));\n                }\n                if (request.status >= 400 && request.status <= 499) {\n                  reject(new Error(\"HttpProvider ERROR: \".concat(request.responseText, \" (code: \").concat(request.status, \")\")));\n                }\n              }\n            };\n            request.ontimeout = function () {\n              _this.connected = false;\n              reject(new Error(\"Connection error: Timeout exceeded after \".concat(_this.timeout, \"ms\")));\n            };\n            try {\n              request.send(JSON.stringify(payload));\n            } catch (error) {\n              _this.connected = false;\n              reject(error);\n            }\n          });\n        }\n      }, {\n        key: \"isInvalidHttpEndpoint\",\n        value: function isInvalidHttpEndpoint(request) {\n          return request.response === null && request.status === 0;\n        }\n      }]);\n      return HttpProvider;\n    }();\n\n    var BatchRequest =\n    function () {\n      function BatchRequest(moduleInstance) {\n        _classCallCheck(this, BatchRequest);\n        this.moduleInstance = moduleInstance;\n        this.methods = [];\n        this.accounts = [];\n      }\n      _createClass(BatchRequest, [{\n        key: \"add\",\n        value: function add(method) {\n          if (!isObject(method) && method) {\n            throw new Error('Please provide a object of type AbstractMethod.');\n          }\n          this.methods.push(method);\n        }\n      }, {\n        key: \"execute\",\n        value: function () {\n          var _execute = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee() {\n            var _this = this;\n            var payload, response, errors;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return this.toPayload();\n                  case 2:\n                    payload = _context.sent;\n                    _context.next = 5;\n                    return this.moduleInstance.currentProvider.sendPayload(payload);\n                  case 5:\n                    response = _context.sent;\n                    errors = [];\n                    this.methods.forEach(function (method, index) {\n                      if (!isArray(response)) {\n                        if (method.callback) {\n                          method.callback(new Error(\"BatchRequest error: Response should be of type Array but is: \".concat(_typeof(response))), null);\n                          return;\n                        }\n                        throw new Error(\"BatchRequest error: Response should be of type Array but is: \".concat(_typeof(response)));\n                      }\n                      var responseItem = response[index] || null;\n                      var validationResult = JsonRpcResponseValidator.validate(responseItem);\n                      if (validationResult === true) {\n                        try {\n                          var mappedResult;\n                          if (method.Type === 'eth-send-transaction-method' || method.Type === 'observed-transaction-method') {\n                            mappedResult = responseItem.result;\n                          } else {\n                            mappedResult = method.afterExecution(responseItem.result);\n                          }\n                          response[index] = mappedResult;\n                          if (method.callback) {\n                            method.callback(false, mappedResult);\n                          }\n                        } catch (error) {\n                          errors[index] = {\n                            method: method,\n                            error: error\n                          };\n                          if (method.callback) {\n                            method.callback(error, null);\n                          }\n                        }\n                        return;\n                      }\n                      errors[index] = {\n                        method: method,\n                        error: validationResult\n                      };\n                      if (_this.accounts[index] && _this.accounts[index].nonce) {\n                        _this.accounts[index].nonce--;\n                      }\n                      if (method.callback) {\n                        method.callback(validationResult, null);\n                      }\n                    });\n                    if (!(errors.length > 0)) {\n                      _context.next = 10;\n                      break;\n                    }\n                    throw {\n                      errors: errors,\n                      response: response\n                    };\n                  case 10:\n                    return _context.abrupt(\"return\", {\n                      methods: this.methods,\n                      response: response\n                    });\n                  case 11:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function execute() {\n            return _execute.apply(this, arguments);\n          }\n          return execute;\n        }()\n      }, {\n        key: \"toPayload\",\n        value: function () {\n          var _toPayload = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee2() {\n            var payload, i, method, account, response;\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    payload = [];\n                    i = 0;\n                  case 2:\n                    if (!(i < this.methods.length)) {\n                      _context2.next = 18;\n                      break;\n                    }\n                    method = this.methods[i];\n                    method.beforeExecution(this.moduleInstance);\n                    if (!(this.moduleInstance.accounts && method.Type === 'eth-send-transaction-method' && method.hasAccounts())) {\n                      _context2.next = 14;\n                      break;\n                    }\n                    account = this.moduleInstance.accounts.wallet[method.parameters[0].from];\n                    if (!account) {\n                      _context2.next = 14;\n                      break;\n                    }\n                    _context2.next = 10;\n                    return method.signTransaction(account);\n                  case 10:\n                    response = _context2.sent;\n                    method.parameters = [response.rawTransaction];\n                    method.rpcMethod = 'eth_sendRawTransaction';\n                    this.accounts[i] = account;\n                  case 14:\n                    payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n                  case 15:\n                    i++;\n                    _context2.next = 2;\n                    break;\n                  case 18:\n                    return _context2.abrupt(\"return\", payload);\n                  case 19:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, this);\n          }));\n          function toPayload() {\n            return _toPayload.apply(this, arguments);\n          }\n          return toPayload;\n        }()\n      }]);\n      return BatchRequest;\n    }();\n\n    var Web3EthereumProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(Web3EthereumProvider, _AbstractSocketProvid);\n      function Web3EthereumProvider(connection) {\n        var _this;\n        _classCallCheck(this, Web3EthereumProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Web3EthereumProvider).call(this, connection, null));\n        _this.host = 'Web3EthereumProvider';\n        return _this;\n      }\n      _createClass(Web3EthereumProvider, [{\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('notification', this.onMessage.bind(this));\n          this.connection.on('connect', this.onConnect.bind(this));\n          this.connection.on('connect', this.onReady.bind(this));\n          this.connection.on('close', this.onClose.bind(this));\n          this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n          this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_NETWORK_CHANGED:\n              this.connection.removeListener('networkChanged', this.onNetworkChanged);\n              break;\n            case this.SOCKET_ACCOUNTS_CHANGED:\n              this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n              break;\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('notification', this.onMessage);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeListener('connect', this.onReady);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeListener('close', this.onClose);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('close', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n          }\n          _get(_getPrototypeOf(Web3EthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"removeAllSocketListeners\",\n        value: function removeAllSocketListeners() {\n          this.connection.removeAllListeners();\n        }\n      }, {\n        key: \"onNetworkChanged\",\n        value: function onNetworkChanged(networkId) {\n          this.emit('networkChanged', networkId);\n        }\n      }, {\n        key: \"onAccountsChanged\",\n        value: function onAccountsChanged(accounts) {\n          this.emit('accountsChanged', accounts);\n        }\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(response) {\n          this.emit(this.getSubscriptionEvent(response.subscription), response);\n        }\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return this.connection.send(method, parameters);\n                  case 3:\n                    return _context.abrupt(\"return\", _context.sent);\n                  case 6:\n                    _context.prev = 6;\n                    _context.t0 = _context[\"catch\"](0);\n                    throw new Error(\"Node error: \".concat(_context.t0.message));\n                  case 9:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this, [[0, 6]]);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var _this2 = this;\n          var methodCalls = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            methodCalls.push(_this2.connection.send(method.rpcMethod, method.parameters));\n          });\n          return Promise.all(methodCalls);\n        }\n      }]);\n      return Web3EthereumProvider;\n    }(AbstractSocketProvider);\n\n    var MetamaskProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(MetamaskProvider, _AbstractSocketProvid);\n      function MetamaskProvider(inpageProvider) {\n        var _this;\n        _classCallCheck(this, MetamaskProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MetamaskProvider).call(this, inpageProvider, null));\n        _this.host = 'metamask';\n        return _this;\n      }\n      _createClass(MetamaskProvider, [{\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n          this.connection.on('networkChanged', this.onReady.bind(this));\n          this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n          this.connection.on('data', this.onMessage.bind(this));\n          this.connection.on('error', this.onError.bind(this));\n        }\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(metamaskParam, payload) {\n          _get(_getPrototypeOf(MetamaskProvider.prototype), \"onMessage\", this).call(this, payload);\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_NETWORK_CHANGED:\n              this.connection.removeListener('networkChanged', this.onNetworkChanged);\n              break;\n            case this.SOCKET_ACCOUNTS_CHANGED:\n              this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n              break;\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('data', this.onMessage);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('error', this.onError);\n              break;\n          }\n          _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"removeAllSocketListeners\",\n        value: function removeAllSocketListeners() {\n          this.connection.removeListener(this.SOCKET_NETWORK_CHANGED, this.onNetworkChanged);\n          this.connection.removeListener(this.SOCKET_ACCOUNTS_CHANGED, this.onAccountsChanged);\n          _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllSocketListeners\", this).call(this);\n        }\n      }, {\n        key: \"onNetworkChanged\",\n        value: function onNetworkChanged(networkId) {\n          this.emit('networkChanged', networkId);\n        }\n      }, {\n        key: \"onAccountsChanged\",\n        value: function onAccountsChanged(accounts) {\n          this.emit('accountsChanged', accounts);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          return true;\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this2 = this;\n          return new Promise(function (resolve, reject) {\n            _this2.connection.send(payload, function (error, response) {\n              _this2.removeAllListeners(payload.id);\n              if (!error) {\n                return resolve(response);\n              }\n              reject(error);\n            });\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return this.connection.isConnected();\n        }\n      }]);\n      return MetamaskProvider;\n    }(AbstractSocketProvider);\n\n    var MistEthereumProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(MistEthereumProvider, _AbstractSocketProvid);\n      function MistEthereumProvider(connection) {\n        var _this;\n        _classCallCheck(this, MistEthereumProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MistEthereumProvider).call(this, connection, null));\n        _this.host = 'mist';\n        return _this;\n      }\n      _createClass(MistEthereumProvider, [{\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('data', this.onMessage.bind(this));\n          this.connection.on('error', this.onError.bind(this));\n          this.connection.on('connect', this.onConnect.bind(this));\n          this.connection.on('connect', this.onReady.bind(this));\n          this.connection.on('end', this.onClose.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('data', this.onMessage);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('error', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeListener('end', this.onClose);\n              break;\n          }\n          _get(_getPrototypeOf(MistEthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          return true;\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this2 = this;\n          return new Promise(function (resolve, reject) {\n            _this2.connection.send(payload, function (error, response) {\n              _this2.removeAllListeners(payload.id);\n              if (!error) {\n                return resolve(response);\n              }\n              reject(error);\n            });\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return this.connection.isConnected();\n        }\n      }]);\n      return MistEthereumProvider;\n    }(AbstractSocketProvider);\n\n    var CustomProvider =\n    function () {\n      function CustomProvider(connection) {\n        _classCallCheck(this, CustomProvider);\n        this.host = 'CustomProvider';\n        this.connection = connection;\n        this.checkConnectionMethods();\n      }\n      _createClass(CustomProvider, [{\n        key: \"supportsSubscriptions\",\n        value: function supportsSubscriptions() {\n          return false;\n        }\n      }, {\n        key: \"checkConnectionMethods\",\n        value: function checkConnectionMethods() {\n          if (this.connection.send || this.connection.sendAsync) {\n            return true;\n          }\n          throw new Error('Invalid provider injected!');\n        }\n      }, {\n        key: \"subscribe\",\n        value: function subscribe() {\n          throw new Error('Subscriptions are not supported with the CustomProvider.');\n        }\n      }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe() {\n          throw new Error('Subscriptions are not supported with the CustomProvider.');\n        }\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            var response, validationResult;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n                  case 2:\n                    response = _context.sent;\n                    validationResult = JsonRpcResponseValidator.validate(response);\n                    if (!(validationResult instanceof Error)) {\n                      _context.next = 6;\n                      break;\n                    }\n                    throw validationResult;\n                  case 6:\n                    return _context.abrupt(\"return\", response.result);\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var payload = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n          });\n          return this.sendPayload(payload);\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this = this;\n          return new Promise(function (resolve, reject) {\n            if (_this.connection.sendAsync) {\n              _this.connection.sendAsync(payload, function (error, response) {\n                if (!error) {\n                  resolve(response);\n                }\n                reject(error);\n              });\n              return;\n            }\n            _this.connection.send(payload, function (error, response) {\n              if (!error) {\n                resolve(response);\n              }\n              reject(error);\n            });\n          });\n        }\n      }]);\n      return CustomProvider;\n    }();\n\n    var ProvidersModuleFactory =\n    function () {\n      function ProvidersModuleFactory() {\n        _classCallCheck(this, ProvidersModuleFactory);\n      }\n      _createClass(ProvidersModuleFactory, [{\n        key: \"createBatchRequest\",\n        value: function createBatchRequest(moduleInstance) {\n          return new BatchRequest(moduleInstance);\n        }\n      }, {\n        key: \"createProviderResolver\",\n        value: function createProviderResolver() {\n          return new ProviderResolver(this);\n        }\n      }, {\n        key: \"createHttpProvider\",\n        value: function createHttpProvider(url) {\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new HttpProvider(url, options, this);\n        }\n      }, {\n        key: \"createXMLHttpRequest\",\n        value: function createXMLHttpRequest(host, timeout, headers, agent, withCredentials) {\n          var request;\n          if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n            request = new xhr2Cookies.XMLHttpRequest();\n            request.nodejsSet(agent);\n          } else {\n            request = new XMLHttpRequest();\n          }\n          request.open('POST', host, true);\n          request.setRequestHeader('Content-Type', 'application/json');\n          request.timeout = timeout;\n          request.withCredentials = withCredentials;\n          if (headers) {\n            headers.forEach(function (header) {\n              request.setRequestHeader(header.name, header.value);\n            });\n          }\n          return request;\n        }\n      }, {\n        key: \"createWebsocketProvider\",\n        value: function createWebsocketProvider(url) {\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var connection = '';\n          if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n            var headers = options.headers || {};\n            var urlObject = new URL(url);\n            if (!headers.authorization && urlObject.username && urlObject.password) {\n              var authToken = Buffer.from(\"\".concat(urlObject.username, \":\").concat(urlObject.password)).toString('base64');\n              headers.authorization = \"Basic \".concat(authToken);\n            }\n            connection = new websocket.w3cwebsocket(url, options.protocol, null, headers, null, options.clientConfig);\n          } else {\n            connection = new window.WebSocket(url, options.protocol);\n          }\n          return new WebsocketProvider(connection, options.timeout);\n        }\n      }, {\n        key: \"createIpcProvider\",\n        value: function createIpcProvider(path, net) {\n          return new IpcProvider(net.connect({\n            path: path\n          }), path);\n        }\n      }, {\n        key: \"createWeb3EthereumProvider\",\n        value: function createWeb3EthereumProvider(connection) {\n          return new Web3EthereumProvider(connection);\n        }\n      }, {\n        key: \"createMetamaskProvider\",\n        value: function createMetamaskProvider(inpageProvider) {\n          return new MetamaskProvider(inpageProvider);\n        }\n      }, {\n        key: \"createMistEthereumProvider\",\n        value: function createMistEthereumProvider(mistEthereumProvider) {\n          return new MistEthereumProvider(mistEthereumProvider);\n        }\n      }, {\n        key: \"createCustomProvider\",\n        value: function createCustomProvider(connection) {\n          return new CustomProvider(connection);\n        }\n      }]);\n      return ProvidersModuleFactory;\n    }();\n\n    var global$1 = function () {\n      return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n    }() || new Function('return this')();\n    var ProviderDetector =\n    function () {\n      function ProviderDetector() {\n        _classCallCheck(this, ProviderDetector);\n      }\n      _createClass(ProviderDetector, null, [{\n        key: \"detect\",\n        value: function detect() {\n          if (typeof global$1.ethereumProvider !== 'undefined' && global$1.ethereumProvider.constructor.name === 'EthereumProvider') {\n            return global$1.ethereumProvider;\n          }\n          if (typeof global$1.web3 !== 'undefined' && global$1.web3.currentProvider) {\n            return global$1.web3.currentProvider;\n          }\n          return null;\n        }\n      }]);\n      return ProviderDetector;\n    }();\n\n    function HttpProvider$1(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new ProvidersModuleFactory().createHttpProvider(url, options);\n    }\n    function WebsocketProvider$1(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new ProvidersModuleFactory().createWebsocketProvider(url, options);\n    }\n    function IpcProvider$1(path, net) {\n      return new ProvidersModuleFactory().createIpcProvider(path, net);\n    }\n    function BatchRequest$1(moduleInstance) {\n      return new ProvidersModuleFactory().createBatchRequest(moduleInstance);\n    }\n    function ProviderResolver$1() {\n      return new ProvidersModuleFactory().createProviderResolver();\n    }\n\n    exports.BatchRequest = BatchRequest$1;\n    exports.HttpProvider = HttpProvider$1;\n    exports.IpcProvider = IpcProvider$1;\n    exports.ProviderDetector = ProviderDetector;\n    exports.ProviderResolver = ProviderResolver$1;\n    exports.ProvidersModuleFactory = ProvidersModuleFactory;\n    exports.Web3EthereumProvider = Web3EthereumProvider;\n    exports.WebsocketProvider = WebsocketProvider$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}